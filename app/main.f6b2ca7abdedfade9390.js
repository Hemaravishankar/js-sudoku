!function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}var e={};r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=1)}([function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(){return g}function a(){return m}function o(){return p}function u(){return s(g,p)}function l(){return[].concat(n(p)).map(function(t){return s(g,new Set(t))}).concat([].concat(n(g)).map(function(t){return s(new Set(t),p)})).concat(function(){var t=[];return[["A","B","C"],["D","E","F"],["G","H","I"]].forEach(function(r){[["1","2","3"],["4","5","6"],["7","8","9"]].forEach(function(e){t.push(s(new Set(r),new Set(e)))})}),t}())}function c(t,r){var e=new Map;return[].concat(n(t)).forEach(function(t){return e.set(t,r.filter(function(r){return r.has(t)}))}),e}function f(t,r){var e=new Map;return[].concat(n(t)).forEach(function(t){var i=r.get(t);e.set(t,new Set([].concat(n(new Set([].concat(n(i[0]),n(i[1]),n(i[2]))))).filter(function(r){return r!==t})))}),e}function s(t,r){var e=new Set,n=!0,i=!1,a=void 0;try{for(var o,u=t.values()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,c=!0,f=!1,s=void 0;try{for(var h,v=(r.values()||r)[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var y=h.value;e.add(l+y)}}catch(t){f=!0,s=t}finally{try{!c&&v.return&&v.return()}finally{if(f)throw s}}}}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}function h(t,r){var e=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value,l=r(u);if(l)return l}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return!1}function v(t){for(var r=[].concat(n(t)),e=r.length,i=void 0,a=void 0;0!==e;)a=Math.floor(Math.random()*e),e-=1,i=r[e],r[e]=r[a],r[a]=i;return r}function y(t){var r=!0,e=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){if(!i.value)return!1}}catch(t){e=!0,n=t}finally{try{!r&&a.return&&a.return()}finally{if(e)throw n}}return!0}function d(t,r){return Math.floor(Math.random()*(r-t+1))+t}Object.defineProperty(r,"__esModule",{value:!0}),r.getRows=i,r.getLowerCaseRows=a,r.getCols=o,r.getSquares=u,r.getUnitList=l,r.getUnits=c,r.getPeers=f,r.cross=s,r.some=h,r.shuffle=v,r.all=y,r.getRandomInt=d;var g=new Set(["A","B","C","D","E","F","G","H","I"]),p=new Set(["1","2","3","4","5","6","7","8","9"]),m=new Set(["a","b","c","d","e","f","g","h","i"])},function(t,r,e){"use strict";e(2);var n=e(3);new(function(t){return t&&t.__esModule?t:{default:t}}(n).default)},function(t,r){},function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),l=e(4),c=n(l),f=e(5),s=n(f),h=function(){function t(){a(this,t),this.game=c.default.getGame(),this.puzzle=this.game.puzzle,this.solution=this.game.solution,this.grid=new s.default,this.grid.fillClues(this.puzzle),this.setInputEvents()}return u(t,[{key:"setInputEvents",value:function(){var r=this,e=this.grid,n=this.grid.squares,i=!0,a=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,s=o(f,2),h=s[0],v=s[1];!function(t,r){r.onclick=function(){e.highlightSquare(r),e.highlightPeers(t)}}(h,v)}}catch(t){a=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw u}}document.onkeydown=function(n){var i=n.key,a=n.keyCode;a>=49&&a<=57?(e.setSquareValue(i,r.puzzle),r.solved()&&t.displayMessage()):8===a&&e.setSquareValue("",r.puzzle)}}},{key:"solved",value:function(){var t=!0,r=!1,e=void 0;try{for(var n,a=this.solution[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var u=n.value,l=o(u,2),c=l[0],f=l[1];if([].concat(i(this.puzzle.get(c)))[0]!==[].concat(i(f))[0])return!1}}catch(t){r=!0,e=t}finally{try{!t&&a.return&&a.return()}finally{if(r)throw e}}return!0}}],[{key:"displayMessage",value:function(){window.alert("Congratulations! You solved the puzzle.")}}]),t}();r.default=h},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(t){var r=new Map;w.forEach(function(t){return r.set(t,m)});var e=!0,n=!1,i=void 0;try{for(var u,l=a(t).entries()[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value,f=d(c,2),s=f[0],h=f[1];if(m.has(h)&&!o(r,s,h))return!1}}catch(t){n=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}return r}function a(t){for(var r=t.filter(function(t){return m.has(t)||"0"===t||"."===t}),e=new Map,i=[].concat(n(w)),a=0;a<i.length;a++)e.set(i[a],r[a]);return e}function o(t,r,e){var i=[].concat(n(t.get(r))).filter(function(t){return t!==e});return!!(0,g.all)(i.map(function(e){return u(t,r,e)}))&&t}function u(t,r,e){if(!t.get(r).has(e))return t;if(t.set(r,new Set([].concat(n(t.get(r))).filter(function(t){return t!==e}))),!t.get(r).size)return!1;if(1===t.get(r).size){var i=[].concat(n(t.get(r)))[0];if(!(0,g.all)([].concat(n(A.get(r))).map(function(r){return u(t,r,i)})))return!1}var a=!0,l=!1,c=void 0;try{for(var f,s=S.get(r)[Symbol.iterator]();!(a=(f=s.next()).done);a=!0){var h=f.value,v=[].concat(n(h)).filter(function(r){return t.get(r).has(e)});if(!v.length)return!1;if(1===v.length&&!o(t,v[0],e))return!1}}catch(t){l=!0,c=t}finally{try{!a&&s.return&&s.return()}finally{if(l)throw c}}return t}function l(t){return c(i(t))}function c(t){if(!t)return!1;if((0,g.all)([].concat(n(w)).map(function(r){return 1===t.get(r).size})))return t;var r=[].concat(n(w)).filter(function(r){return t.get(r).size>1}).sort(function(r,e){return t.get(r).size-t.get(e).size})[0];return(0,g.some)(t.get(r),function(e){return c(o(new Map(t),r,e))})}function f(t){function r(r){var e=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var l=o.value;if([].concat(n(t.get(l))).filter(function(t){return!m.has(t)}).length>0)return!1}}catch(t){i=!0,a=t}finally{try{!e&&u.return&&u.return()}finally{if(i)throw a}}return!0}return t&&(0,g.all)(b.map(function(t){return r(t)}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:17,r=new Map;w.forEach(function(t){return r.set(t,m)});var e=!0,i=!1,a=void 0;try{for(var u,l=(0,g.shuffle)(w)[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value;if(!o(r,c,h(r.get(c))))break;var f=[].concat(n(w)).filter(function(t){return 1===r.get(t).size}).map(function(t){return r.get(t)});if(f.length>=t&&new Set(f).size>=8)return[].concat(n(w)).map(function(t){return 1===r.get(t).size?[].concat(n(r.get(t)))[0]:"0"})}}catch(t){i=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw a}}return s(t)}function h(t){return[].concat(n(t))[(0,g.getRandomInt)(0,t.size-1)]}function v(t,r){var e=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var l=o.value,c=d(l,2),f=c[0],s=c[1];if([].concat(n(r.get(f)))[0]!==[].concat(n(s))[0])return!1}}catch(t){i=!0,a=t}finally{try{!e&&u.return&&u.return()}finally{if(i)throw a}}return!0}function y(t){var r=[],e={},i=(0,g.shuffle)(w);[].concat(n(w)).forEach(function(i,a){r.push([].concat(n(t.get(i)))[0]),e[i]=a});for(var a=new Map,o=0;o<i.length;o++){var u=e[i[o]],c=r[u];r[u]="0",v(t,l(r))?a.set(i[o],"0"):(r[u]=c,a.set(i[o],c))}return a}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=e(0),p={easy:28,medium:37,hard:45,master:65},m=(0,g.getCols)(),w=(0,g.getSquares)(),b=(0,g.getUnitList)(),S=(0,g.getUnits)(w,b),A=(0,g.getPeers)(w,S);r.default={getGame:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.easy,r=l(s(81-t));!f(r);)r=l(s());return{puzzle:y(r),solution:r}}}},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),u=e(6),l=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-container";i(this,t),this.grid=(0,u.build)(r),this.peers=this.grid.peers,this.squares=this.grid.squares}return o(t,[{key:"fillClues",value:function(t){var r=!0,e=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,c=a(l,2),f=c[0],s=c[1],h=[].concat(n(s))[0],v=this.squares.get(f.toLowerCase());"0"===h||"."===h?v.innerHTML="":(v.classList.add("clue"),v.innerHTML=h)}}catch(t){e=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(e)throw i}}}},{key:"setSquareValue",value:function(t,r){this.highlightedSquare&&(r.set(this.highlightedSquare.id.toUpperCase(),new Set(t)),this.highlightedSquare.innerHTML=t)}},{key:"highlightSquare",value:function(t){t.classList.contains("clue")||(this.highlightedSquare&&(this.highlightedSquare.classList.remove("focused-content"),this.highlightedSquare.classList.remove("highlight")),this.highlightedSquare=t,this.highlightedSquare.classList.add("focused-content"))}},{key:"highlightPeers",value:function(t){this.highlightedPeers&&this.highlightedPeers.forEach(function(r){r.id!==t&&r.classList.remove("highlight")}),this.highlightedPeers=this.peers.get(t),this.highlightedPeers.forEach(function(t){return t.classList.add("highlight")})}}]),t}();r.default=l},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-container",r=[].concat(n((0,o.getLowerCaseRows)())),e=[].concat(n((0,o.getCols)())),i=document.getElementById(t),h=new Map,v=i.offsetWidth?i.offsetWidth/u-3:50,y=0;y<u;y++){for(var d=l(v),g=0;g<u;g++){var p=""+r[y]+e[g],m=c(v),w=f(p);m.appendChild(w),d.appendChild(m),h.set(p,w)}i.appendChild(d)}var b=(0,o.getSquares)(),S=(0,o.getUnitList)(),A=s((0,o.getPeers)(b,(0,o.getUnits)(b,S))),x=new Map,M=!0,z=!1,q=void 0;try{for(var E,C=A[Symbol.iterator]();!(M=(E=C.next()).done);M=!0){var L=E.value,P=a(L,2),_=P[0],k=P[1];x.set(_,[].concat(n(k)).map(function(t){return h.get(t)}))}}catch(t){z=!0,q=t}finally{try{!M&&C.return&&C.return()}finally{if(z)throw q}}return{peers:x,squares:h}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.build=i;var o=e(0),u=9,l=function(t){var r=document.createElement("div");return r.setAttribute("class","row"),r.style.height=t+"px",r},c=function(t){var r=document.createElement("div");return r.setAttribute("class","col-1 square"),r.style.height=t+"px",r.style.width=t+"px",r.style.maxWidth=t+"px",r.style.flex="0 0 "+t+"px",r},f=function(t){var r=document.createElement("div");return r.id=t,r.setAttribute("class","square-content"),r},s=function(t){var r=new Map,e=!0,i=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value,f=a(c,2),s=f[0],h=f[1];r.set(s.toLowerCase(),new Set([].concat(n(h)).map(function(t){return t.toLowerCase()})))}}catch(t){i=!0,o=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw o}}return r}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi5mNmIyY2E3YWJkZWRmYWRlOTM5MC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZjZiMmNhN2FiZGVkZmFkZTkzOTAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3N1ZG9rdS1ncmlkLXV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3N1ZG9rdS11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc3Vkb2t1LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zdWRva3UtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zdWRva3UtZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc3Vkb2t1LWdyaWQtYnVpbGRlci5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJnZXRSb3dzIiwicm93cyIsImdldExvd2VyQ2FzZVJvd3MiLCJsb3dlckNhc2VSb3dzIiwiZ2V0Q29scyIsImNvbHMiLCJnZXRTcXVhcmVzIiwiY3Jvc3MiLCJnZXRVbml0TGlzdCIsImNvbmNhdCIsIm1hcCIsIlNldCIsInIiLCJ1IiwiZm9yRWFjaCIsInB1c2giLCJnZXRVbml0cyIsInNxdWFyZXMiLCJ1bml0bGlzdCIsInVuaXRzIiwiTWFwIiwic2V0IiwiZmlsdGVyIiwiaGFzIiwiZ2V0UGVlcnMiLCJwZWVycyIsIngiLCJhIiwiYiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJ2YWx1ZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiYTEiLCJ2YWx1ZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImIxIiwiYWRkIiwiZXJyIiwicmV0dXJuIiwic29tZSIsInNlcSIsImZ1bmMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJyZXN1bHQiLCJzaHVmZmxlIiwiYXJyYXkiLCJjdXJyZW50SW5kZXgiLCJ0ZW1wb3JhcnlWYWx1ZSIsInJhbmRvbUluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWxsIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQiLCJfZGlkSXRlcmF0b3JFcnJvcjQiLCJfaXRlcmF0b3JFcnJvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwiZ2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiX3N1ZG9rdSIsIm9iaiIsImRlZmF1bHQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9zbGljZWRUb0FycmF5Iiwic2xpY2VJdGVyYXRvciIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3N1ZG9rdUdlbmVyYXRvciIsIl9zdWRva3VHZW5lcmF0b3IyIiwiX3N1ZG9rdUdyaWQiLCJfc3Vkb2t1R3JpZDIiLCJTdWRva3UiLCJ0aGlzIiwiZ2FtZSIsImdldEdhbWUiLCJwdXp6bGUiLCJzb2x1dGlvbiIsImdyaWQiLCJmaWxsQ2x1ZXMiLCJzZXRJbnB1dEV2ZW50cyIsIl90aGlzIiwiX3JlZiIsIl9yZWYyIiwiZWwiLCJvbmNsaWNrIiwiaGlnaGxpZ2h0U3F1YXJlIiwiaGlnaGxpZ2h0UGVlcnMiLCJkb2N1bWVudCIsIm9ua2V5ZG93biIsImUiLCJrZXljb2RlIiwia2V5Q29kZSIsInNldFNxdWFyZVZhbHVlIiwic29sdmVkIiwiZGlzcGxheU1lc3NhZ2UiLCJfcmVmMyIsIl9yZWY0Iiwid2luZG93IiwiYWxlcnQiLCJwYXJzZUdyaWQiLCJkaWdpdHMiLCJncmlkVmFsdWVzIiwiZW50cmllcyIsImFzc2lnbiIsImNoYXJzIiwib3RoZXJzIiwiX3N1ZG9rdUdyaWRVdGlsIiwiZDIiLCJlbGltaW5hdGUiLCJzaXplIiwiczIiLCJ1bml0IiwiZHBsYWNlcyIsInNvbHZlIiwic2VhcmNoIiwic29ydCIsInMxIiwidW5pdFNvbHZlZCIsInJhbmRvbVB1enpsZSIsImFyZ3VtZW50cyIsInJhbmRvbVZhbHVlIiwiZHMiLCJpc1VuaXF1ZSIsIm9yaWdpbmFsIiwidGVzdCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241IiwiX2RpZEl0ZXJhdG9yRXJyb3I1IiwiX2l0ZXJhdG9yRXJyb3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsImNyZWF0ZVB1enpsZSIsImluZGljZXMiLCJzaHVmZmxlZCIsImoiLCJ2IiwibGV2ZWwiLCJlYXN5IiwibWVkaXVtIiwiaGFyZCIsIm1hc3RlciIsImRpZmZpY3VsdHkiLCJfc3Vkb2t1R3JpZEJ1aWxkZXIiLCJTdWRva3VHcmlkIiwiaWQiLCJidWlsZCIsImNsdWVzIiwiY2x1ZSIsInNxdWFyZSIsInRvTG93ZXJDYXNlIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiaGlnaGxpZ2h0ZWRTcXVhcmUiLCJ0b1VwcGVyQ2FzZSIsImNvbnRhaW5zIiwicmVtb3ZlIiwiaGlnaGxpZ2h0ZWRQZWVycyIsImVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbGxTaXplIiwib2Zmc2V0V2lkdGgiLCJyb3ciLCJjcmVhdGVSb3ciLCJjcmVhdGVTcXVhcmUiLCJjb250ZW50IiwiY3JlYXRlU3F1YXJlQ29udGVudCIsImFwcGVuZENoaWxkIiwicGVlcklkcyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImhlaWdodCIsIndpZHRoIiwibWF4V2lkdGgiLCJmbGV4IiwiZDEiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBZixHQUNBLEdBQUFRLEdBQUFSLEtBQUFnQixXQUNBLFdBQTJCLE1BQUFoQixHQUFBLFNBQzNCLFdBQWlDLE1BQUFBLEdBRWpDLE9BREFKLEdBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBUSxFQUFBQyxHQUFzRCxNQUFBUixRQUFBUyxVQUFBQyxlQUFBakIsS0FBQWMsRUFBQUMsSUFHdER0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QXVNLEdBQUEsTUFBTUEsR0FBRzFCLG1CQUg3QixNQUFBdEksR0FBQW5CLEdBQUEsRUFBQUMsRUFBQWtCLEVBQUEsYUFBQXBCLEdBQUFLLEVBQUFnQixRQUFBaEIsRUFBQWdCLFNBQUEsV0FBQXBCLEVBQUEsS0FBQUMsSUFNN0IsTUFBTzRCIiwiZmlsZSI6Im1haW4uZjZiMmNhN2FiZGVkZmFkZTkzOTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmdldFJvd3MgPSBnZXRSb3dzO1xuZXhwb3J0cy5nZXRMb3dlckNhc2VSb3dzID0gZ2V0TG93ZXJDYXNlUm93cztcbmV4cG9ydHMuZ2V0Q29scyA9IGdldENvbHM7XG5leHBvcnRzLmdldFNxdWFyZXMgPSBnZXRTcXVhcmVzO1xuZXhwb3J0cy5nZXRVbml0TGlzdCA9IGdldFVuaXRMaXN0O1xuZXhwb3J0cy5nZXRVbml0cyA9IGdldFVuaXRzO1xuZXhwb3J0cy5nZXRQZWVycyA9IGdldFBlZXJzO1xuZXhwb3J0cy5jcm9zcyA9IGNyb3NzO1xuZXhwb3J0cy5zb21lID0gc29tZTtcbmV4cG9ydHMuc2h1ZmZsZSA9IHNodWZmbGU7XG5leHBvcnRzLmFsbCA9IGFsbDtcbmV4cG9ydHMuZ2V0UmFuZG9tSW50ID0gZ2V0UmFuZG9tSW50O1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIHJvd3MgPSBuZXcgU2V0KFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knXSk7XG52YXIgY29scyA9IG5ldyBTZXQoWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOSddKTtcbnZhciBsb3dlckNhc2VSb3dzID0gbmV3IFNldChbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJ10pO1xuXG5mdW5jdGlvbiBnZXRSb3dzKCkge1xuICByZXR1cm4gcm93cztcbn1cblxuZnVuY3Rpb24gZ2V0TG93ZXJDYXNlUm93cygpIHtcbiAgcmV0dXJuIGxvd2VyQ2FzZVJvd3M7XG59XG5cbmZ1bmN0aW9uIGdldENvbHMoKSB7XG4gIHJldHVybiBjb2xzO1xufVxuXG5mdW5jdGlvbiBnZXRTcXVhcmVzKCkge1xuICByZXR1cm4gY3Jvc3Mocm93cywgY29scyk7XG59XG5cbmZ1bmN0aW9uIGdldFVuaXRMaXN0KCkge1xuICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjb2xzKSkubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuIGNyb3NzKHJvd3MsIG5ldyBTZXQoYykpO1xuICB9KS5jb25jYXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyb3dzKSkubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgcmV0dXJuIGNyb3NzKG5ldyBTZXQociksIGNvbHMpO1xuICB9KSkuY29uY2F0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdSA9IFtdO1xuICAgIFtbJ0EnLCAnQicsICdDJ10sIFsnRCcsICdFJywgJ0YnXSwgWydHJywgJ0gnLCAnSSddXS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBbWycxJywgJzInLCAnMyddLCBbJzQnLCAnNScsICc2J10sIFsnNycsICc4JywgJzknXV0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICB1LnB1c2goY3Jvc3MobmV3IFNldChyKSwgbmV3IFNldChjKSkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdTtcbiAgfSgpKTtcbn1cblxuZnVuY3Rpb24gZ2V0VW5pdHMoc3F1YXJlcywgdW5pdGxpc3QpIHtcbiAgdmFyIHVuaXRzID0gbmV3IE1hcCgpO1xuICBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNxdWFyZXMpKS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHVuaXRzLnNldChzLCB1bml0bGlzdC5maWx0ZXIoZnVuY3Rpb24gKHUpIHtcbiAgICAgIHJldHVybiB1LmhhcyhzKTtcbiAgICB9KSk7XG4gIH0pO1xuXG4gIHJldHVybiB1bml0cztcbn1cblxuZnVuY3Rpb24gZ2V0UGVlcnMoc3F1YXJlcywgdW5pdHMpIHtcbiAgdmFyIHBlZXJzID0gbmV3IE1hcCgpO1xuXG4gIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICB2YXIgcCA9IHVuaXRzLmdldChzKTtcbiAgICBwZWVycy5zZXQocywgbmV3IFNldChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwWzBdKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBbMV0pLCBfdG9Db25zdW1hYmxlQXJyYXkocFsyXSkpKSkpLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIHggIT09IHM7XG4gICAgfSkpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBlZXJzO1xufVxuXG5mdW5jdGlvbiBjcm9zcyhhLCBiKSB7XG4gIHZhciBjID0gbmV3IFNldCgpO1xuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGEudmFsdWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgYTEgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gKGIudmFsdWVzKCkgfHwgYilbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgYjEgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICBjLmFkZChhMSArIGIxKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gc29tZShzZXEsIGZ1bmMpIHtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHNlcVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgdmFyIGQgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgIHZhciByZXN1bHQgPSBmdW5jKGQpO1xuICAgICAgaWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBGaXNoZXItWWF0ZXMgU2h1ZmZsZVxuICogU2VlIGh0dHA6Ly9iaXQubHkvMmdNWGlqWFxuICovXG5mdW5jdGlvbiBzaHVmZmxlKHNlcSkge1xuICB2YXIgYXJyYXkgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNlcSkpO1xuICB2YXIgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoLFxuICAgICAgdGVtcG9yYXJ5VmFsdWUgPSB2b2lkIDAsXG4gICAgICByYW5kb21JbmRleCA9IHZvaWQgMDtcblxuICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZS4uLlxuICB3aGlsZSAoMCAhPT0gY3VycmVudEluZGV4KSB7XG5cbiAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnQuLi5cbiAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleCk7XG4gICAgY3VycmVudEluZGV4IC09IDE7XG5cbiAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgdGVtcG9yYXJ5VmFsdWUgPSBhcnJheVtjdXJyZW50SW5kZXhdO1xuICAgIGFycmF5W2N1cnJlbnRJbmRleF0gPSBhcnJheVtyYW5kb21JbmRleF07XG4gICAgYXJyYXlbcmFuZG9tSW5kZXhdID0gdGVtcG9yYXJ5VmFsdWU7XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIGFsbCh2YWx1ZXMpIHtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IChfc3RlcDQgPSBfaXRlcmF0b3I0Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZSkge1xuICAgICAgdmFyIHYgPSBfc3RlcDQudmFsdWU7XG5cbiAgICAgIGlmICghdikgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3I0ID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjQgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgJiYgX2l0ZXJhdG9yNC5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yNC5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNCkge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbn1cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbl9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc3Vkb2t1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9zdWRva3UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3Vkb2t1KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxubmV3IF9zdWRva3UyLmRlZmF1bHQoKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfc3Vkb2t1R2VuZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9zdWRva3VHZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3Vkb2t1R2VuZXJhdG9yKTtcblxudmFyIF9zdWRva3VHcmlkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9zdWRva3VHcmlkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N1ZG9rdUdyaWQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFN1ZG9rdSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3Vkb2t1KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWRva3UpO1xuXG4gICAgdGhpcy5nYW1lID0gX3N1ZG9rdUdlbmVyYXRvcjIuZGVmYXVsdC5nZXRHYW1lKCk7XG4gICAgdGhpcy5wdXp6bGUgPSB0aGlzLmdhbWUucHV6emxlO1xuICAgIHRoaXMuc29sdXRpb24gPSB0aGlzLmdhbWUuc29sdXRpb247XG5cbiAgICB0aGlzLmdyaWQgPSBuZXcgX3N1ZG9rdUdyaWQyLmRlZmF1bHQoKTtcbiAgICB0aGlzLmdyaWQuZmlsbENsdWVzKHRoaXMucHV6emxlKTtcbiAgICB0aGlzLnNldElucHV0RXZlbnRzKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3Vkb2t1LCBbe1xuICAgIGtleTogJ3NldElucHV0RXZlbnRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW5wdXRFdmVudHMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgZ3JpZCA9IHRoaXMuZ3JpZDtcbiAgICAgIHZhciBzcXVhcmVzID0gdGhpcy5ncmlkLnNxdWFyZXM7XG5cbiAgICAgIC8vIFNldHVwIHRvdWNoL2NsaWNrIGV2ZW50cyBmb3IgZWFjaCBzcXVhcmUuXG5cbiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHMsIGVsKSB7XG4gICAgICAgIGVsLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZ3JpZC5oaWdobGlnaHRTcXVhcmUoZWwpO1xuICAgICAgICAgIGdyaWQuaGlnaGxpZ2h0UGVlcnMocyk7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gc3F1YXJlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgX3JlZiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7XG5cbiAgICAgICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgICAgIHZhciBlbCA9IF9yZWYyWzFdO1xuXG4gICAgICAgICAgX2xvb3AocywgZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5wdXQgZXZlbnRcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBlLmtleTtcbiAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGU7XG5cbiAgICAgICAgaWYgKGtleWNvZGUgPj0gNDkgJiYga2V5Y29kZSA8PSA1Nykge1xuICAgICAgICAgIGdyaWQuc2V0U3F1YXJlVmFsdWUodmFsdWUsIF90aGlzLnB1enpsZSk7XG4gICAgICAgICAgaWYgKF90aGlzLnNvbHZlZCgpKSBTdWRva3UuZGlzcGxheU1lc3NhZ2UoKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXljb2RlID09PSA4KSB7XG4gICAgICAgICAgZ3JpZC5zZXRTcXVhcmVWYWx1ZSgnJywgX3RoaXMucHV6emxlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzb2x2ZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzb2x2ZWQoKSB7XG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHRoaXMuc29sdXRpb25bU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgX3JlZjMgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICB2YXIgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMik7XG5cbiAgICAgICAgICB2YXIgcyA9IF9yZWY0WzBdO1xuICAgICAgICAgIHZhciBkID0gX3JlZjRbMV07XG5cbiAgICAgICAgICBpZiAoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnB1enpsZS5nZXQocykpKVswXSAhPT0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkKSlbMF0pIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogJ2Rpc3BsYXlNZXNzYWdlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UoKSB7XG4gICAgICB3aW5kb3cuYWxlcnQoJ0NvbmdyYXR1bGF0aW9ucyEgWW91IHNvbHZlZCB0aGUgcHV6emxlLicpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWRva3U7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFN1ZG9rdTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTsgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEEgSmF2YVNjcmlwdCBwb3J0IGJhc2VkIG9uIFwiU29sdmluZyBFdmVyeSBTdWRva3UgUHV6emxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYnkgUGV0ZXIgTm9ydmlnLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBUaGUgYXJ0aWNsZSBjYW4gYmUgZm91bmQgaGVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogLSBodHRwOi8vbm9ydmlnLmNvbS9zdWRva3UuaHRtbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBUaGUgb3JpZ2luYWwgUHl0aG9uIHNvdXJjZSBjYW4gYmUgZm91bmQgaGVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogLSBodHRwczovL2dpdGh1Yi5jb20vbm9ydmlnL3B5dHVkZXMvYmxvYi9tYXN0ZXIvc3Vkb2t1LnB5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgX3N1ZG9rdUdyaWRVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBsZXZlbCA9IHtcbiAgZWFzeTogMjgsXG4gIG1lZGl1bTogMzcsXG4gIGhhcmQ6IDQ1LFxuICBtYXN0ZXI6IDY1XG59O1xuXG52YXIgZGlnaXRzID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRDb2xzKSgpO1xudmFyIHNxdWFyZXMgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFNxdWFyZXMpKCk7XG52YXIgdW5pdGxpc3QgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFVuaXRMaXN0KSgpO1xuXG52YXIgdW5pdHMgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFVuaXRzKShzcXVhcmVzLCB1bml0bGlzdCk7XG52YXIgcGVlcnMgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFBlZXJzKShzcXVhcmVzLCB1bml0cyk7XG5cbi8qKlxuICogQ29udmVydCBncmlkIHRvIGEgZGljdCBvZiBwb3NzaWJsZSB2YWx1ZXMsIHtzcXVhcmU6IGRpZ2l0c30sXG4gKiBvciByZXR1cm4gZmFsc2UgaWYgYSBjb250cmFkaWN0aW9uIGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBwYXJzZUdyaWQoZ3JpZCkge1xuICB2YXIgdmFsdWVzID0gbmV3IE1hcCgpO1xuICBzcXVhcmVzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gdmFsdWVzLnNldChzLCBkaWdpdHMpO1xuICB9KTtcblxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBncmlkVmFsdWVzKGdyaWQpLmVudHJpZXMoKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgIHZhciBfcmVmID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpO1xuXG4gICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgdmFyIGQgPSBfcmVmMlsxXTtcblxuICAgICAgaWYgKGRpZ2l0cy5oYXMoZCkgJiYgIWFzc2lnbih2YWx1ZXMsIHMsIGQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGdyaWQgaW50byBhIGRpY3Qgb2Yge3NxdWFyZTogY2hhcn0gd2l0aCAnMCcgb3IgJy4nIGZvciBlbXB0aWVzLlxuICovXG5mdW5jdGlvbiBncmlkVmFsdWVzKGdyaWQpIHtcbiAgdmFyIGNoYXJzID0gZ3JpZC5maWx0ZXIoZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gZGlnaXRzLmhhcyhjKSB8fCBjID09PSAnMCcgfHwgYyA9PT0gJy4nO1xuICB9KTtcbiAgdmFyIHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgdmFyIHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNxdWFyZXMpKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YWx1ZXMuc2V0KHNbaV0sIGNoYXJzW2ldKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbi8qKlxuICogRWxpbWluYXRlIGFsbCB0aGUgb3RoZXIgdmFsdWVzIChleGNlcHQgZCkgZnJvbSB2YWx1ZXNbc10gYW5kIHByb3BhZ2F0ZS5cbiAqIFJldHVybiB2YWx1ZXMsIGV4Y2VwdCByZXR1cm4gRmFsc2UgaWYgYSBjb250cmFkaWN0aW9uIGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBhc3NpZ24odmFsdWVzLCBzLCBkKSB7XG4gIHZhciBvdGhlcnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHZhbHVlcy5nZXQocykpKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4geCAhPT0gZDtcbiAgfSk7XG4gIHJldHVybiAoMCwgX3N1ZG9rdUdyaWRVdGlsLmFsbCkob3RoZXJzLm1hcChmdW5jdGlvbiAoZDIpIHtcbiAgICByZXR1cm4gZWxpbWluYXRlKHZhbHVlcywgcywgZDIpO1xuICB9KSkgPyB2YWx1ZXMgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBFbGltaW5hdGUgZCBmcm9tIHZhbHVlc1tzXTsgcHJvcGFnYXRlIHdoZW4gdmFsdWVzIG9yIHBsYWNlcyA8PSAyLlxuICogUmV0dXJuIHZhbHVlcywgZXhjZXB0IHJldHVybiBGYWxzZSBpZiBhIGNvbnRyYWRpY3Rpb24gaXMgZGV0ZWN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGVsaW1pbmF0ZSh2YWx1ZXMsIHMsIGQpIHtcbiAgaWYgKCF2YWx1ZXMuZ2V0KHMpLmhhcyhkKSkgcmV0dXJuIHZhbHVlcztcblxuICB2YWx1ZXMuc2V0KHMsIG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMuZ2V0KHMpKSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIHggIT09IGQ7XG4gIH0pKSk7XG5cbiAgaWYgKCF2YWx1ZXMuZ2V0KHMpLnNpemUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAodmFsdWVzLmdldChzKS5zaXplID09PSAxKSB7XG4gICAgdmFyIGQyID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMuZ2V0KHMpKSlbMF07XG5cbiAgICBpZiAoISgwLCBfc3Vkb2t1R3JpZFV0aWwuYWxsKShbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBlZXJzLmdldChzKSkpLm1hcChmdW5jdGlvbiAoczIpIHtcbiAgICAgIHJldHVybiBlbGltaW5hdGUodmFsdWVzLCBzMiwgZDIpO1xuICAgIH0pKSkgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHVuaXRzLmdldChzKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xuICAgICAgdmFyIHVuaXQgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIHZhciBkcGxhY2VzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh1bml0KSkuZmlsdGVyKGZ1bmN0aW9uIChzMikge1xuICAgICAgICByZXR1cm4gdmFsdWVzLmdldChzMikuaGFzKGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghZHBsYWNlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChkcGxhY2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAoIWFzc2lnbih2YWx1ZXMsIGRwbGFjZXNbMF0sIGQpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufVxuXG5mdW5jdGlvbiBzb2x2ZShncmlkKSB7XG4gIHJldHVybiBzZWFyY2gocGFyc2VHcmlkKGdyaWQpKTtcbn1cblxuLyoqXG4gKiBVc2luZyBkZXB0aC1maXJzdCBzZWFyY2ggYW5kIHByb3BhZ2F0aW9uLCB0cnkgYWxsIHBvc3NpYmxlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2VhcmNoKHZhbHVlcykge1xuICBpZiAoIXZhbHVlcykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICgoMCwgX3N1ZG9rdUdyaWRVdGlsLmFsbCkoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMTtcbiAgfSkpKSByZXR1cm4gdmFsdWVzO1xuXG4gIHZhciBzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkuZmlsdGVyKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5nZXQocykuc2l6ZSA+IDE7XG4gIH0pLnNvcnQoZnVuY3Rpb24gKHMxLCBzMikge1xuICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMxKS5zaXplIC0gdmFsdWVzLmdldChzMikuc2l6ZTtcbiAgfSlbMF07XG5cbiAgcmV0dXJuICgwLCBfc3Vkb2t1R3JpZFV0aWwuc29tZSkodmFsdWVzLmdldChzKSwgZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gc2VhcmNoKGFzc2lnbihuZXcgTWFwKHZhbHVlcyksIHMsIGQpKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQSBwdXp6bGUgaXMgc29sdmVkIGlmIGVhY2ggdW5pdCBpcyBhIHBlcm11dGF0aW9uIG9mIHRoZSBkaWdpdHMgMSB0byA5LlxuICovXG5mdW5jdGlvbiBzb2x2ZWQodmFsdWVzKSB7XG4gIGZ1bmN0aW9uIHVuaXRTb2x2ZWQodW5pdCkge1xuICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHVuaXRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgdmFyIHMgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgdmFyIGRpZmYgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHZhbHVlcy5nZXQocykpKS5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gIWRpZ2l0cy5oYXMoZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZGlmZi5sZW5ndGggPiAwKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcyAmJiAoMCwgX3N1ZG9rdUdyaWRVdGlsLmFsbCkodW5pdGxpc3QubWFwKGZ1bmN0aW9uICh1KSB7XG4gICAgcmV0dXJuIHVuaXRTb2x2ZWQodSk7XG4gIH0pKTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgcmFuZG9tIHB1enpsZSB3aXRoIE4gb3IgbW9yZSBhc3NpZ25tZW50cy4gUmVzdGFydCBvbiBjb250cmFkaWN0aW9ucy5cbiAqIE5vdGUgdGhlIHJlc3VsdGluZyBwdXp6bGUgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgc29sdmFibGUsIGJ1dCBlbXBpcmljYWxseVxuICogYWJvdXQgOTkuOCUgb2YgdGhlbSBhcmUgc29sdmFibGUuIFNvbWUgaGF2ZSBtdWx0aXBsZSBzb2x1dGlvbnNcbiAqL1xuZnVuY3Rpb24gcmFuZG9tUHV6emxlKCkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTc7XG5cbiAgdmFyIHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgc3F1YXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5zZXQocywgZGlnaXRzKTtcbiAgfSk7XG5cbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9ICgwLCBfc3Vkb2t1R3JpZFV0aWwuc2h1ZmZsZSkoc3F1YXJlcylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcbiAgICAgIHZhciBzID0gX3N0ZXA0LnZhbHVlO1xuXG4gICAgICBpZiAoIWFzc2lnbih2YWx1ZXMsIHMsIHJhbmRvbVZhbHVlKHZhbHVlcy5nZXQocykpKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIGRzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkuZmlsdGVyKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDE7XG4gICAgICB9KS5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5nZXQocyk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGRzLmxlbmd0aCA+PSBuICYmIG5ldyBTZXQoZHMpLnNpemUgPj0gOCkge1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMSA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmFsdWVzLmdldChzKSkpWzBdIDogJzAnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjQpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByYW5kb21QdXp6bGUobik7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVZhbHVlKHZhbHVlcykge1xuICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMpKVsoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFJhbmRvbUludCkoMCwgdmFsdWVzLnNpemUgLSAxKV07XG59XG5cbmZ1bmN0aW9uIGlzVW5pcXVlKG9yaWdpbmFsLCB0ZXN0KSB7XG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjUgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yNSA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBvcmlnaW5hbFtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkge1xuICAgICAgdmFyIF9yZWYzID0gX3N0ZXA1LnZhbHVlO1xuXG4gICAgICB2YXIgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMik7XG5cbiAgICAgIHZhciBzID0gX3JlZjRbMF07XG4gICAgICB2YXIgZCA9IF9yZWY0WzFdO1xuXG4gICAgICBpZiAoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0ZXN0LmdldChzKSkpWzBdICE9PSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGQpKVswXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjUgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgJiYgX2l0ZXJhdG9yNS5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogSXRlcmF0ZSB0aHJvdWdoIHRoZSByYW5kb21seSBzaHVmZmxlZCBzcXVhcmVzLlxuICogQWZ0ZXIgcmVtb3ZpbmcgZWFjaCBzcXVhcmUgZnJvbSB0aGUgc29sdXRpb25cbiAqIHNvbHZlIGl0IGFuZCB0ZXN0IGlmIGl0IGlzIHRoZSBzYW1lIGFzIHRoZSBvcmlnaW5hbC5cbiAqIElmIHRoZSBzb2x1dGlvbiBkb2Vzbid0IG1hdGNoIHVuZG8gdGhlIHJlbW92YWwgYW5kXG4gKiB0cnkgYW5vdGhlciBzcXVhcmUuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVB1enpsZShzb2x1dGlvbikge1xuICB2YXIgcHV6emxlID0gW107XG4gIHZhciBpbmRpY2VzID0ge307XG4gIHZhciBzaHVmZmxlZCA9ICgwLCBfc3Vkb2t1R3JpZFV0aWwuc2h1ZmZsZSkoc3F1YXJlcyk7XG5cbiAgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkuZm9yRWFjaChmdW5jdGlvbiAocywgaSkge1xuICAgIHB1enpsZS5wdXNoKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc29sdXRpb24uZ2V0KHMpKSlbMF0pO1xuICAgIGluZGljZXNbc10gPSBpO1xuICB9KTtcblxuICB2YXIgcmVzdWx0ID0gbmV3IE1hcCgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2h1ZmZsZWQubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaiA9IGluZGljZXNbc2h1ZmZsZWRbaV1dO1xuICAgIHZhciB2ID0gcHV6emxlW2pdO1xuICAgIHB1enpsZVtqXSA9ICcwJztcblxuICAgIGlmICghaXNVbmlxdWUoc29sdXRpb24sIHNvbHZlKHB1enpsZSkpKSB7XG4gICAgICBwdXp6bGVbal0gPSB2O1xuICAgICAgcmVzdWx0LnNldChzaHVmZmxlZFtpXSwgdik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5zZXQoc2h1ZmZsZWRbaV0sICcwJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0ge1xuICBnZXRHYW1lOiBmdW5jdGlvbiBnZXRHYW1lKCkge1xuICAgIHZhciBkaWZmaWN1bHR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBsZXZlbC5lYXN5O1xuXG4gICAgdmFyIHNvbHV0aW9uID0gc29sdmUocmFuZG9tUHV6emxlKDgxIC0gZGlmZmljdWx0eSkpO1xuXG4gICAgd2hpbGUgKCFzb2x2ZWQoc29sdXRpb24pKSB7XG4gICAgICBzb2x1dGlvbiA9IHNvbHZlKHJhbmRvbVB1enpsZSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHV6emxlOiBjcmVhdGVQdXp6bGUoc29sdXRpb24pLFxuICAgICAgc29sdXRpb246IHNvbHV0aW9uXG4gICAgfTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9zdWRva3VHcmlkQnVpbGRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU3Vkb2t1R3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3Vkb2t1R3JpZCgpIHtcbiAgICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdncmlkLWNvbnRhaW5lcic7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Vkb2t1R3JpZCk7XG5cbiAgICB0aGlzLmdyaWQgPSAoMCwgX3N1ZG9rdUdyaWRCdWlsZGVyLmJ1aWxkKShpZCk7XG4gICAgdGhpcy5wZWVycyA9IHRoaXMuZ3JpZC5wZWVycztcbiAgICB0aGlzLnNxdWFyZXMgPSB0aGlzLmdyaWQuc3F1YXJlcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTdWRva3VHcmlkLCBbe1xuICAgIGtleTogJ2ZpbGxDbHVlcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxDbHVlcyhjbHVlcykge1xuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGNsdWVzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBfcmVmID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKTtcblxuICAgICAgICAgIHZhciBzID0gX3JlZjJbMF07XG4gICAgICAgICAgdmFyIGQgPSBfcmVmMlsxXTtcblxuICAgICAgICAgIHZhciBjbHVlID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkKSlbMF07XG4gICAgICAgICAgdmFyIHNxdWFyZSA9IHRoaXMuc3F1YXJlcy5nZXQocy50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgIGlmIChjbHVlID09PSAnMCcgfHwgY2x1ZSA9PT0gJy4nKSB7XG4gICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdjbHVlJyk7XG4gICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gY2x1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFNxdWFyZVZhbHVlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3F1YXJlVmFsdWUodmFsdWUsIHB1enpsZSkge1xuICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUpIHtcbiAgICAgICAgcHV6emxlLnNldCh0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmlkLnRvVXBwZXJDYXNlKCksIG5ldyBTZXQodmFsdWUpKTtcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFNxdWFyZS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoaWdobGlnaHRTcXVhcmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoaWdobGlnaHRTcXVhcmUoc3F1YXJlKSB7XG4gICAgICBpZiAoIXNxdWFyZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NsdWUnKSkge1xuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZFNxdWFyZSkge1xuICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZC1jb250ZW50Jyk7XG4gICAgICAgICAgdGhpcy5oaWdobGlnaHRlZFNxdWFyZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUgPSBzcXVhcmU7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuY2xhc3NMaXN0LmFkZCgnZm9jdXNlZC1jb250ZW50Jyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGlnaGxpZ2h0UGVlcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoaWdobGlnaHRQZWVycyhzcXVhcmUpIHtcbiAgICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkUGVlcnMpIHtcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFBlZXJzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICBpZiAocC5pZCAhPT0gc3F1YXJlKSBwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5oaWdobGlnaHRlZFBlZXJzID0gdGhpcy5wZWVycy5nZXQoc3F1YXJlKTtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRQZWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBwLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1ZG9rdUdyaWQ7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFN1ZG9rdUdyaWQ7XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbmV4cG9ydHMuYnVpbGQgPSBidWlsZDtcblxudmFyIF9zdWRva3VHcmlkVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG52YXIgbiA9IDk7XG52YXIgc3F1YXJlQ2xhc3MgPSAnY29sLTEgc3F1YXJlJztcbnZhciBjb250ZW50Q2xhc3MgPSAnc3F1YXJlLWNvbnRlbnQnO1xuXG52YXIgY3JlYXRlUm93ID0gZnVuY3Rpb24gY3JlYXRlUm93KGNlbGxTaXplKSB7XG4gIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcm93LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncm93Jyk7XG4gIHJvdy5zdHlsZS5oZWlnaHQgPSBjZWxsU2l6ZSArICdweCc7XG5cbiAgcmV0dXJuIHJvdztcbn07XG5cbnZhciBjcmVhdGVTcXVhcmUgPSBmdW5jdGlvbiBjcmVhdGVTcXVhcmUoY2VsbFNpemUpIHtcbiAgdmFyIHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBzcXVhcmUuc2V0QXR0cmlidXRlKCdjbGFzcycsIHNxdWFyZUNsYXNzKTtcblxuICBzcXVhcmUuc3R5bGUuaGVpZ2h0ID0gY2VsbFNpemUgKyAncHgnO1xuICBzcXVhcmUuc3R5bGUud2lkdGggPSBjZWxsU2l6ZSArICdweCc7XG4gIHNxdWFyZS5zdHlsZS5tYXhXaWR0aCA9IGNlbGxTaXplICsgJ3B4JztcbiAgc3F1YXJlLnN0eWxlLmZsZXggPSAnMCAwICcgKyBjZWxsU2l6ZSArICdweCc7XG5cbiAgcmV0dXJuIHNxdWFyZTtcbn07XG5cbnZhciBjcmVhdGVTcXVhcmVDb250ZW50ID0gZnVuY3Rpb24gY3JlYXRlU3F1YXJlQ29udGVudChpZCkge1xuICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250ZW50LmlkID0gaWQ7XG4gIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNvbnRlbnRDbGFzcyk7XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59O1xuXG52YXIgdG9Mb3dlckNhc2UgPSBmdW5jdGlvbiB0b0xvd2VyQ2FzZShzcXVhcmVzKSB7XG4gIHZhciByZXN1bHQgPSBuZXcgTWFwKCk7XG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHNxdWFyZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgX3JlZiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKTtcblxuICAgICAgdmFyIHMgPSBfcmVmMlswXTtcbiAgICAgIHZhciBkID0gX3JlZjJbMV07XG5cbiAgICAgIHJlc3VsdC5zZXQocy50b0xvd2VyQ2FzZSgpLCBuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZCkpLm1hcChmdW5jdGlvbiAoZDEpIHtcbiAgICAgICAgcmV0dXJuIGQxLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KSkpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gYnVpbGQoKSB7XG4gIHZhciBpZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2dyaWQtY29udGFpbmVyJztcblxuICB2YXIgcm93cyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRMb3dlckNhc2VSb3dzKSgpKSk7XG4gIHZhciBjb2xzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSgoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldENvbHMpKCkpKTtcblxuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgdmFyIHNxdWFyZXMgPSBuZXcgTWFwKCk7XG4gIHZhciBjZWxsU2l6ZSA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPyBlbGVtZW50Lm9mZnNldFdpZHRoIC8gbiAtIDMgOiA1MDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIHZhciByb3cgPSBjcmVhdGVSb3coY2VsbFNpemUpO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBuOyBqKyspIHtcbiAgICAgIHZhciBfaWQgPSAnJyArIHJvd3NbaV0gKyBjb2xzW2pdO1xuICAgICAgdmFyIHNxdWFyZSA9IGNyZWF0ZVNxdWFyZShjZWxsU2l6ZSk7XG4gICAgICB2YXIgY29udGVudCA9IGNyZWF0ZVNxdWFyZUNvbnRlbnQoX2lkKTtcblxuICAgICAgc3F1YXJlLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgcm93LmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICBzcXVhcmVzLnNldChfaWQsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxuXG4gIHZhciBzID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRTcXVhcmVzKSgpO1xuICB2YXIgdSA9ICgwLCBfc3Vkb2t1R3JpZFV0aWwuZ2V0VW5pdExpc3QpKCk7XG4gIHZhciBwZWVySWRzID0gdG9Mb3dlckNhc2UoKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRQZWVycykocywgKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRVbml0cykocywgdSkpKTtcbiAgdmFyIHBlZXJzID0gbmV3IE1hcCgpO1xuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBwZWVySWRzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICB2YXIgX3JlZjMgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYzLCAyKTtcblxuICAgICAgdmFyIF9zID0gX3JlZjRbMF07XG4gICAgICB2YXIgcCA9IF9yZWY0WzFdO1xuXG4gICAgICBwZWVycy5zZXQoX3MsIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocCkpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gc3F1YXJlcy5nZXQoeCk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBlZXJzOiBwZWVycyxcbiAgICBzcXVhcmVzOiBzcXVhcmVzXG4gIH07XG59XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbWFpbi5mNmIyY2E3YWJkZWRmYWRlOTM5MC5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGY2YjJjYTdhYmRlZGZhZGU5MzkwIiwiY29uc3Qgcm93cyA9IG5ldyBTZXQoWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSSddKTtcbmNvbnN0IGNvbHMgPSBuZXcgU2V0KFsnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknXSk7XG5jb25zdCBsb3dlckNhc2VSb3dzID0gbmV3IFNldChbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJ10pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um93cygpIHtcbiAgcmV0dXJuIHJvd3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb3dlckNhc2VSb3dzKCkge1xuICByZXR1cm4gbG93ZXJDYXNlUm93cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbHMoKSB7XG4gIHJldHVybiBjb2xzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcXVhcmVzKCkge1xuICByZXR1cm4gY3Jvc3Mocm93cywgY29scyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbml0TGlzdCgpIHtcbiAgcmV0dXJuIFsuLi5jb2xzXS5tYXAoYyA9PiBjcm9zcyhyb3dzLCBuZXcgU2V0KGMpKSlcbiAgICAgIC5jb25jYXQoWy4uLnJvd3NdLm1hcChyID0+IGNyb3NzKG5ldyBTZXQociksIGNvbHMpKSlcbiAgICAgIC5jb25jYXQoKCgpID0+IHtcbiAgICAgICAgbGV0IHUgPSBbXTtcbiAgICAgICAgW1snQScsICdCJywgJ0MnXSwgWydEJywgJ0UnLCAnRiddLCBbJ0cnLCAnSCcsICdJJ11dLmZvckVhY2gociA9PiB7XG4gICAgICAgICAgW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddLCBbJzcnLCAnOCcsICc5J11dLmZvckVhY2goYyA9PiB7XG4gICAgICAgICAgICB1LnB1c2goY3Jvc3MobmV3IFNldChyKSwgbmV3IFNldChjKSkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHU7XG4gICAgICB9KSgpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXRzKHNxdWFyZXMsIHVuaXRsaXN0KSB7XG4gIGxldCB1bml0cyA9IG5ldyBNYXAoKTtcbiAgWy4uLnNxdWFyZXNdLmZvckVhY2gocyA9PiB1bml0cy5zZXQocywgdW5pdGxpc3QuZmlsdGVyKHUgPT4gdS5oYXMocykpKSk7XG5cbiAgcmV0dXJuIHVuaXRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVlcnMoc3F1YXJlcywgdW5pdHMpIHtcbiAgbGV0IHBlZXJzID0gbmV3IE1hcCgpO1xuXG4gIFsuLi5zcXVhcmVzXS5mb3JFYWNoKHMgPT4ge1xuICAgIGxldCBwID0gdW5pdHMuZ2V0KHMpO1xuICAgIHBlZXJzLnNldChzLCBuZXcgU2V0KFxuICAgICAgICBbLi4ubmV3IFNldChbLi4ucFswXSwgLi4ucFsxXSwgLi4ucFsyXV0pXS5maWx0ZXIoeCA9PiB4ICE9PSBzKSkpO1xuICB9KTtcblxuICByZXR1cm4gcGVlcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhhLCBiKSB7XG4gIGxldCBjID0gbmV3IFNldCgpO1xuXG4gIGZvciAobGV0IGExIG9mIGEudmFsdWVzKCkpIHtcbiAgICBmb3IgKGxldCBiMSBvZiBiLnZhbHVlcygpIHx8IGIpIHtcbiAgICAgIGMuYWRkKGExICsgYjEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc29tZShzZXEsIGZ1bmMpIHtcbiAgZm9yIChsZXQgZCBvZiBzZXEpIHtcbiAgICBsZXQgcmVzdWx0ID0gZnVuYyhkKTtcbiAgICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEZpc2hlci1ZYXRlcyBTaHVmZmxlXG4gKiBTZWUgaHR0cDovL2JpdC5seS8yZ01YaWpYXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKHNlcSkge1xuICBsZXQgYXJyYXkgPSBbLi4uc2VxXTtcbiAgbGV0IGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCwgdGVtcG9yYXJ5VmFsdWUsIHJhbmRvbUluZGV4O1xuXG4gIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlLi4uXG4gIHdoaWxlICgwICE9PSBjdXJyZW50SW5kZXgpIHtcblxuICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC4uLlxuICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcbiAgICBjdXJyZW50SW5kZXggLT0gMTtcblxuICAgIC8vIEFuZCBzd2FwIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudC5cbiAgICB0ZW1wb3JhcnlWYWx1ZSA9IGFycmF5W2N1cnJlbnRJbmRleF07XG4gICAgYXJyYXlbY3VycmVudEluZGV4XSA9IGFycmF5W3JhbmRvbUluZGV4XTtcbiAgICBhcnJheVtyYW5kb21JbmRleF0gPSB0ZW1wb3JhcnlWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsbCh2YWx1ZXMpIHtcbiAgZm9yIChsZXQgdiBvZiB2YWx1ZXMpXG4gICAgaWYgKCF2KSByZXR1cm4gZmFsc2U7XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3N1ZG9rdS1ncmlkLXV0aWwuanMiLCJpbXBvcnQgJy4uL2Nzcy9tYWluLmNzcyc7XG5pbXBvcnQgU3Vkb2t1IGZyb20gXCIuL3N1ZG9rdVwiO1xuXG5uZXcgU3Vkb2t1KCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3N1ZG9rdS11aS5qcyIsImltcG9ydCBnZW5lcmF0b3IgZnJvbSAnLi9zdWRva3UtZ2VuZXJhdG9yJztcbmltcG9ydCBTdWRva3VHcmlkIGZyb20gJy4vc3Vkb2t1LWdyaWQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdWRva3Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdhbWUgPSBnZW5lcmF0b3IuZ2V0R2FtZSgpO1xuICAgIHRoaXMucHV6emxlID0gdGhpcy5nYW1lLnB1enpsZTtcbiAgICB0aGlzLnNvbHV0aW9uID0gdGhpcy5nYW1lLnNvbHV0aW9uO1xuXG4gICAgdGhpcy5ncmlkID0gbmV3IFN1ZG9rdUdyaWQoKTtcbiAgICB0aGlzLmdyaWQuZmlsbENsdWVzKHRoaXMucHV6emxlKTtcbiAgICB0aGlzLnNldElucHV0RXZlbnRzKCk7XG4gIH1cblxuICBzZXRJbnB1dEV2ZW50cygpIHtcbiAgICBsZXQgZ3JpZCA9IHRoaXMuZ3JpZDtcbiAgICBsZXQgc3F1YXJlcyA9IHRoaXMuZ3JpZC5zcXVhcmVzO1xuXG4gICAgLy8gU2V0dXAgdG91Y2gvY2xpY2sgZXZlbnRzIGZvciBlYWNoIHNxdWFyZS5cbiAgICBmb3IgKGxldCBbcywgZWxdIG9mIHNxdWFyZXMpIHtcbiAgICAgIGVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGdyaWQuaGlnaGxpZ2h0U3F1YXJlKGVsKTtcbiAgICAgICAgZ3JpZC5oaWdobGlnaHRQZWVycyhzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbnB1dCBldmVudFxuICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICBsZXQgdmFsdWUgPSBlLmtleTtcbiAgICAgIGxldCBrZXljb2RlID0gZS5rZXlDb2RlO1xuXG4gICAgICBpZiAoa2V5Y29kZSA+PSA0OSAmJiBrZXljb2RlIDw9IDU3KSB7XG4gICAgICAgIGdyaWQuc2V0U3F1YXJlVmFsdWUodmFsdWUsIHRoaXMucHV6emxlKTtcbiAgICAgICAgaWYgKHRoaXMuc29sdmVkKCkpIFN1ZG9rdS5kaXNwbGF5TWVzc2FnZSgpXG5cbiAgICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gOCkge1xuICAgICAgICBncmlkLnNldFNxdWFyZVZhbHVlKCcnLCB0aGlzLnB1enpsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc29sdmVkKCkge1xuICAgIGZvciAobGV0IFtzLCBkXSBvZiB0aGlzLnNvbHV0aW9uKSB7XG4gICAgICBpZiAoWy4uLnRoaXMucHV6emxlLmdldChzKV1bMF0gIT09IFsuLi5kXVswXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RhdGljIGRpc3BsYXlNZXNzYWdlKCkge1xuICAgIHdpbmRvdy5hbGVydChgQ29uZ3JhdHVsYXRpb25zISBZb3Ugc29sdmVkIHRoZSBwdXp6bGUuYClcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9zdWRva3UuanMiLCIvKipcbiAqIEEgSmF2YVNjcmlwdCBwb3J0IGJhc2VkIG9uIFwiU29sdmluZyBFdmVyeSBTdWRva3UgUHV6emxlXCJcbiAqIGJ5IFBldGVyIE5vcnZpZy5cbiAqXG4gKiBUaGUgYXJ0aWNsZSBjYW4gYmUgZm91bmQgaGVyZTpcbiAqIC0gaHR0cDovL25vcnZpZy5jb20vc3Vkb2t1Lmh0bWxcbiAqXG4gKiBUaGUgb3JpZ2luYWwgUHl0aG9uIHNvdXJjZSBjYW4gYmUgZm91bmQgaGVyZTpcbiAqIC0gaHR0cHM6Ly9naXRodWIuY29tL25vcnZpZy9weXR1ZGVzL2Jsb2IvbWFzdGVyL3N1ZG9rdS5weVxuICovXG5cbmltcG9ydCB7XG4gIGdldENvbHMsXG4gIGdldFNxdWFyZXMsXG4gIGdldFVuaXRMaXN0LFxuICBnZXRVbml0cyxcbiAgZ2V0UGVlcnMsXG4gIHNvbWUsXG4gIHNodWZmbGUsXG4gIGFsbCxcbiAgZ2V0UmFuZG9tSW50XG59IGZyb20gJy4vc3Vkb2t1LWdyaWQtdXRpbCc7XG5cbmNvbnN0IGxldmVsID0ge1xuICBlYXN5OiAyOCxcbiAgbWVkaXVtOiAzNyxcbiAgaGFyZDogNDUsXG4gIG1hc3RlcjogNjVcbn07XG5cbmNvbnN0IGRpZ2l0cyA9IGdldENvbHMoKTtcbmNvbnN0IHNxdWFyZXMgPSBnZXRTcXVhcmVzKCk7XG5jb25zdCB1bml0bGlzdCA9IGdldFVuaXRMaXN0KCk7XG5cbmxldCB1bml0cyA9IGdldFVuaXRzKHNxdWFyZXMsIHVuaXRsaXN0KTtcbmxldCBwZWVycyA9IGdldFBlZXJzKHNxdWFyZXMsIHVuaXRzKTtcblxuLyoqXG4gKiBDb252ZXJ0IGdyaWQgdG8gYSBkaWN0IG9mIHBvc3NpYmxlIHZhbHVlcywge3NxdWFyZTogZGlnaXRzfSxcbiAqIG9yIHJldHVybiBmYWxzZSBpZiBhIGNvbnRyYWRpY3Rpb24gaXMgZGV0ZWN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlR3JpZChncmlkKSB7XG4gIGxldCB2YWx1ZXMgPSBuZXcgTWFwKCk7XG4gIHNxdWFyZXMuZm9yRWFjaChzID0+IHZhbHVlcy5zZXQocywgZGlnaXRzKSk7XG5cbiAgZm9yIChsZXQgW3MsIGRdIG9mIGdyaWRWYWx1ZXMoZ3JpZCkuZW50cmllcygpKSB7XG4gICAgaWYgKGRpZ2l0cy5oYXMoZCkgJiYgIWFzc2lnbih2YWx1ZXMsIHMsIGQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGdyaWQgaW50byBhIGRpY3Qgb2Yge3NxdWFyZTogY2hhcn0gd2l0aCAnMCcgb3IgJy4nIGZvciBlbXB0aWVzLlxuICovXG5mdW5jdGlvbiBncmlkVmFsdWVzKGdyaWQpIHtcbiAgbGV0IGNoYXJzID0gZ3JpZC5maWx0ZXIoYyA9PiBkaWdpdHMuaGFzKGMpIHx8IGMgPT09ICcwJyB8fCBjID09PSAnLicpO1xuICBsZXQgdmFsdWVzID0gbmV3IE1hcCgpO1xuICBsZXQgcyA9IFsuLi5zcXVhcmVzXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YWx1ZXMuc2V0KHNbaV0sIGNoYXJzW2ldKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbi8qKlxuICogRWxpbWluYXRlIGFsbCB0aGUgb3RoZXIgdmFsdWVzIChleGNlcHQgZCkgZnJvbSB2YWx1ZXNbc10gYW5kIHByb3BhZ2F0ZS5cbiAqIFJldHVybiB2YWx1ZXMsIGV4Y2VwdCByZXR1cm4gRmFsc2UgaWYgYSBjb250cmFkaWN0aW9uIGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBhc3NpZ24odmFsdWVzLCBzLCBkKSB7XG4gIGxldCBvdGhlcnMgPSBbLi4udmFsdWVzLmdldChzKV0uZmlsdGVyKHggPT4geCAhPT0gZCk7XG4gIHJldHVybiBhbGwob3RoZXJzLm1hcChkMiA9PiBlbGltaW5hdGUodmFsdWVzLCBzLCBkMikpKSA/IHZhbHVlcyA6IGZhbHNlO1xufVxuXG4vKipcbiAqIEVsaW1pbmF0ZSBkIGZyb20gdmFsdWVzW3NdOyBwcm9wYWdhdGUgd2hlbiB2YWx1ZXMgb3IgcGxhY2VzIDw9IDIuXG4gKiBSZXR1cm4gdmFsdWVzLCBleGNlcHQgcmV0dXJuIEZhbHNlIGlmIGEgY29udHJhZGljdGlvbiBpcyBkZXRlY3RlZC5cbiAqL1xuZnVuY3Rpb24gZWxpbWluYXRlKHZhbHVlcywgcywgZCkge1xuICBpZiAoIXZhbHVlcy5nZXQocykuaGFzKGQpKVxuICAgIHJldHVybiB2YWx1ZXM7XG5cbiAgdmFsdWVzLnNldChzLCBuZXcgU2V0KFsuLi52YWx1ZXMuZ2V0KHMpXS5maWx0ZXIoeCA9PiB4ICE9PSBkKSkpO1xuXG4gIGlmICghdmFsdWVzLmdldChzKS5zaXplKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIH0gZWxzZSBpZiAodmFsdWVzLmdldChzKS5zaXplID09PSAxKSB7XG4gICAgbGV0IGQyID0gWy4uLnZhbHVlcy5nZXQocyldWzBdO1xuXG4gICAgaWYgKCFhbGwoWy4uLnBlZXJzLmdldChzKV0ubWFwKHMyID0+IGVsaW1pbmF0ZSh2YWx1ZXMsIHMyLCBkMikpKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAobGV0IHVuaXQgb2YgdW5pdHMuZ2V0KHMpKSB7XG4gICAgbGV0IGRwbGFjZXMgPSBbLi4udW5pdF0uZmlsdGVyKHMyID0+IHZhbHVlcy5nZXQoczIpLmhhcyhkKSk7XG5cbiAgICBpZiAoIWRwbGFjZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkcGxhY2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKCFhc3NpZ24odmFsdWVzLCBkcGxhY2VzWzBdLCBkKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmZ1bmN0aW9uIHNvbHZlKGdyaWQpIHtcbiAgcmV0dXJuIHNlYXJjaChwYXJzZUdyaWQoZ3JpZCkpO1xufVxuXG4vKipcbiAqIFVzaW5nIGRlcHRoLWZpcnN0IHNlYXJjaCBhbmQgcHJvcGFnYXRpb24sIHRyeSBhbGwgcG9zc2libGUgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBzZWFyY2godmFsdWVzKSB7XG4gIGlmICghdmFsdWVzKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoYWxsKFsuLi5zcXVhcmVzXS5tYXAocyA9PiB2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDEpKSlcbiAgICByZXR1cm4gdmFsdWVzO1xuXG4gIGxldCBzID0gWy4uLnNxdWFyZXNdXG4gICAgICAuZmlsdGVyKHMgPT4gdmFsdWVzLmdldChzKS5zaXplID4gMSlcbiAgICAgIC5zb3J0KChzMSwgczIpID0+IHZhbHVlcy5nZXQoczEpLnNpemUgLSB2YWx1ZXMuZ2V0KHMyKS5zaXplKVswXTtcblxuICByZXR1cm4gc29tZSh2YWx1ZXMuZ2V0KHMpLCBkID0+IHNlYXJjaChhc3NpZ24obmV3IE1hcCh2YWx1ZXMpLCBzLCBkKSkpO1xufVxuXG4vKipcbiAqIEEgcHV6emxlIGlzIHNvbHZlZCBpZiBlYWNoIHVuaXQgaXMgYSBwZXJtdXRhdGlvbiBvZiB0aGUgZGlnaXRzIDEgdG8gOS5cbiAqL1xuZnVuY3Rpb24gc29sdmVkKHZhbHVlcykge1xuICBmdW5jdGlvbiB1bml0U29sdmVkKHVuaXQpIHtcbiAgICBmb3IgKGxldCBzIG9mIHVuaXQpIHtcbiAgICAgIGxldCBkaWZmID0gWy4uLnZhbHVlcy5nZXQocyldLmZpbHRlcihkID0+ICFkaWdpdHMuaGFzKGQpKTtcbiAgICAgIGlmIChkaWZmLmxlbmd0aCA+IDApIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXMgJiYgYWxsKHVuaXRsaXN0Lm1hcCh1ID0+IHVuaXRTb2x2ZWQodSkpKTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgcmFuZG9tIHB1enpsZSB3aXRoIE4gb3IgbW9yZSBhc3NpZ25tZW50cy4gUmVzdGFydCBvbiBjb250cmFkaWN0aW9ucy5cbiAqIE5vdGUgdGhlIHJlc3VsdGluZyBwdXp6bGUgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgc29sdmFibGUsIGJ1dCBlbXBpcmljYWxseVxuICogYWJvdXQgOTkuOCUgb2YgdGhlbSBhcmUgc29sdmFibGUuIFNvbWUgaGF2ZSBtdWx0aXBsZSBzb2x1dGlvbnNcbiAqL1xuZnVuY3Rpb24gcmFuZG9tUHV6emxlKG4gPSAxNykge1xuICBsZXQgdmFsdWVzID0gbmV3IE1hcCgpO1xuICBzcXVhcmVzLmZvckVhY2gocyA9PiB2YWx1ZXMuc2V0KHMsIGRpZ2l0cykpO1xuXG4gIGZvciAobGV0IHMgb2Ygc2h1ZmZsZShzcXVhcmVzKSkge1xuICAgIGlmICghYXNzaWduKHZhbHVlcywgcywgcmFuZG9tVmFsdWUodmFsdWVzLmdldChzKSkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBsZXQgZHMgPSBbLi4uc3F1YXJlc11cbiAgICAgICAgLmZpbHRlcihzID0+IHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMSlcbiAgICAgICAgLm1hcChzID0+IHZhbHVlcy5nZXQocykpO1xuXG4gICAgaWYgKGRzLmxlbmd0aCA+PSBuICYmIG5ldyBTZXQoZHMpLnNpemUgPj0gOCkge1xuICAgICAgcmV0dXJuIFsuLi5zcXVhcmVzXVxuICAgICAgICAgIC5tYXAocyA9PiB2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDEgPyBbLi4udmFsdWVzLmdldChzKV1bMF0gOiAnMCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByYW5kb21QdXp6bGUobik7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbVZhbHVlKHZhbHVlcykge1xuICByZXR1cm4gWy4uLnZhbHVlc11bZ2V0UmFuZG9tSW50KDAsIHZhbHVlcy5zaXplIC0gMSldO1xufVxuXG5mdW5jdGlvbiBpc1VuaXF1ZShvcmlnaW5hbCwgdGVzdCkge1xuICBmb3IgKGxldCBbcywgZF0gb2Ygb3JpZ2luYWwpIHtcbiAgICBpZiAoWy4uLnRlc3QuZ2V0KHMpXVswXSAhPT0gWy4uLmRdWzBdKSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIHRocm91Z2ggdGhlIHJhbmRvbWx5IHNodWZmbGVkIHNxdWFyZXMuXG4gKiBBZnRlciByZW1vdmluZyBlYWNoIHNxdWFyZSBmcm9tIHRoZSBzb2x1dGlvblxuICogc29sdmUgaXQgYW5kIHRlc3QgaWYgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIG9yaWdpbmFsLlxuICogSWYgdGhlIHNvbHV0aW9uIGRvZXNuJ3QgbWF0Y2ggdW5kbyB0aGUgcmVtb3ZhbCBhbmRcbiAqIHRyeSBhbm90aGVyIHNxdWFyZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHV6emxlKHNvbHV0aW9uKSB7XG4gIGxldCBwdXp6bGUgPSBbXTtcbiAgbGV0IGluZGljZXMgPSB7fTtcbiAgbGV0IHNodWZmbGVkID0gc2h1ZmZsZShzcXVhcmVzKTtcblxuICBbLi4uc3F1YXJlc10uZm9yRWFjaCgocywgaSkgPT4ge1xuICAgIHB1enpsZS5wdXNoKFsuLi5zb2x1dGlvbi5nZXQocyldWzBdKTtcbiAgICBpbmRpY2VzW3NdID0gaTtcbiAgfSk7XG5cbiAgbGV0IHJlc3VsdCA9IG5ldyBNYXAoKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNodWZmbGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGogPSBpbmRpY2VzW3NodWZmbGVkW2ldXTtcbiAgICBsZXQgdiA9IHB1enpsZVtqXTtcbiAgICBwdXp6bGVbal0gPSAnMCc7XG5cbiAgICBpZiAoIWlzVW5pcXVlKHNvbHV0aW9uLCBzb2x2ZShwdXp6bGUpKSkge1xuICAgICAgcHV6emxlW2pdID0gdjtcbiAgICAgIHJlc3VsdC5zZXQoc2h1ZmZsZWRbaV0sIHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuc2V0KHNodWZmbGVkW2ldLCAnMCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0R2FtZTogKGRpZmZpY3VsdHkgPSBsZXZlbC5lYXN5KSA9PiB7XG4gICAgbGV0IHNvbHV0aW9uID0gc29sdmUocmFuZG9tUHV6emxlKDgxIC0gZGlmZmljdWx0eSkpO1xuXG4gICAgd2hpbGUgKCFzb2x2ZWQoc29sdXRpb24pKSB7XG4gICAgICBzb2x1dGlvbiA9IHNvbHZlKHJhbmRvbVB1enpsZSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHV6emxlOiBjcmVhdGVQdXp6bGUoc29sdXRpb24pLFxuICAgICAgc29sdXRpb246IHNvbHV0aW9uXG4gICAgfTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3N1ZG9rdS1nZW5lcmF0b3IuanMiLCJpbXBvcnQge2J1aWxkfSBmcm9tICcuL3N1ZG9rdS1ncmlkLWJ1aWxkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdWRva3VHcmlkIHtcbiAgY29uc3RydWN0b3IoaWQ9J2dyaWQtY29udGFpbmVyJykge1xuICAgIHRoaXMuZ3JpZCA9IGJ1aWxkKGlkKTtcbiAgICB0aGlzLnBlZXJzID0gdGhpcy5ncmlkLnBlZXJzO1xuICAgIHRoaXMuc3F1YXJlcyA9IHRoaXMuZ3JpZC5zcXVhcmVzO1xuICB9XG5cbiAgZmlsbENsdWVzKGNsdWVzKSB7XG4gICAgZm9yIChsZXQgW3MsIGRdIG9mIGNsdWVzKSB7XG4gICAgICBsZXQgY2x1ZSA9IFsuLi5kXVswXTtcbiAgICAgIGxldCBzcXVhcmUgPSB0aGlzLnNxdWFyZXMuZ2V0KHMudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgIGlmIChjbHVlID09PSAnMCcgfHwgY2x1ZSA9PT0gJy4nKSB7XG4gICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdjbHVlJyk7XG4gICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBjbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldFNxdWFyZVZhbHVlKHZhbHVlLCBwdXp6bGUpIHtcbiAgICBpZiAodGhpcy5oaWdobGlnaHRlZFNxdWFyZSkge1xuICAgICAgcHV6emxlLnNldCh0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmlkLnRvVXBwZXJDYXNlKCksIG5ldyBTZXQodmFsdWUpKTtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaGlnaGxpZ2h0U3F1YXJlKHNxdWFyZSkge1xuICAgIGlmICghc3F1YXJlLmNsYXNzTGlzdC5jb250YWlucygnY2x1ZScpKSB7XG4gICAgICBpZiAodGhpcy5oaWdobGlnaHRlZFNxdWFyZSkge1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQtY29udGVudCcpO1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlID0gc3F1YXJlO1xuICAgICAgdGhpcy5oaWdobGlnaHRlZFNxdWFyZS5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkLWNvbnRlbnQnKTtcbiAgICB9XG4gIH1cblxuICBoaWdobGlnaHRQZWVycyhzcXVhcmUpIHtcbiAgICBpZiAodGhpcy5oaWdobGlnaHRlZFBlZXJzKSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodGVkUGVlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgaWYgKHAuaWQgIT09IHNxdWFyZSkgcC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuaGlnaGxpZ2h0ZWRQZWVycyA9IHRoaXMucGVlcnMuZ2V0KHNxdWFyZSk7XG4gICAgdGhpcy5oaWdobGlnaHRlZFBlZXJzLmZvckVhY2gocCA9PiBwLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpKTtcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9zdWRva3UtZ3JpZC5qcyIsImltcG9ydCB7XG4gIGdldExvd2VyQ2FzZVJvd3MsXG4gIGdldENvbHMsXG4gIGdldFNxdWFyZXMsXG4gIGdldFBlZXJzLCBnZXRVbml0cywgZ2V0VW5pdExpc3Rcbn0gZnJvbSBcIi4vc3Vkb2t1LWdyaWQtdXRpbFwiO1xuXG5jb25zdCBuID0gOTtcbmNvbnN0IHNxdWFyZUNsYXNzID0gJ2NvbC0xIHNxdWFyZSc7XG5jb25zdCBjb250ZW50Q2xhc3MgPSAnc3F1YXJlLWNvbnRlbnQnO1xuXG5sZXQgY3JlYXRlUm93ID0gKGNlbGxTaXplKSA9PiB7XG4gIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcm93LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncm93Jyk7XG4gIHJvdy5zdHlsZS5oZWlnaHQgPSBgJHtjZWxsU2l6ZX1weGA7XG5cbiAgcmV0dXJuIHJvdztcbn07XG5cbmxldCBjcmVhdGVTcXVhcmUgPSAoY2VsbFNpemUpID0+IHtcbiAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBzcXVhcmUuc2V0QXR0cmlidXRlKCdjbGFzcycsIHNxdWFyZUNsYXNzKTtcblxuICBzcXVhcmUuc3R5bGUuaGVpZ2h0ID0gYCR7Y2VsbFNpemV9cHhgO1xuICBzcXVhcmUuc3R5bGUud2lkdGggPSBgJHtjZWxsU2l6ZX1weGA7XG4gIHNxdWFyZS5zdHlsZS5tYXhXaWR0aCA9IGAke2NlbGxTaXplfXB4YDtcbiAgc3F1YXJlLnN0eWxlLmZsZXggPSBgMCAwICR7Y2VsbFNpemV9cHhgO1xuXG4gIHJldHVybiBzcXVhcmU7XG59O1xuXG5sZXQgY3JlYXRlU3F1YXJlQ29udGVudCA9IChpZCkgPT4ge1xuICBsZXQgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250ZW50LmlkID0gaWQ7XG4gIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNvbnRlbnRDbGFzcyk7XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59O1xuXG5sZXQgdG9Mb3dlckNhc2UgPSAoc3F1YXJlcykgPT4ge1xuICBsZXQgcmVzdWx0ID0gbmV3IE1hcCgpO1xuICBmb3IgKGxldCBbcywgZF0gb2Ygc3F1YXJlcykge1xuICAgIHJlc3VsdC5zZXQocy50b0xvd2VyQ2FzZSgpLCBuZXcgU2V0KFsuLi5kXS5tYXAoZDEgPT4gZDEudG9Mb3dlckNhc2UoKSkpKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGQoaWQ9J2dyaWQtY29udGFpbmVyJykge1xuICBsZXQgcm93cyA9IFsuLi5nZXRMb3dlckNhc2VSb3dzKCldO1xuICBsZXQgY29scyA9IFsuLi5nZXRDb2xzKCldO1xuXG4gIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBsZXQgc3F1YXJlcyA9IG5ldyBNYXAoKTtcbiAgbGV0IGNlbGxTaXplID0gZWxlbWVudC5vZmZzZXRXaWR0aCA/IChlbGVtZW50Lm9mZnNldFdpZHRoIC8gbikgLSAzIDogNTA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBsZXQgcm93ID0gY3JlYXRlUm93KGNlbGxTaXplKTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG4gICAgICBsZXQgaWQgPSBgJHtyb3dzW2ldfSR7Y29sc1tqXX1gO1xuICAgICAgbGV0IHNxdWFyZSA9IGNyZWF0ZVNxdWFyZShjZWxsU2l6ZSk7XG4gICAgICBsZXQgY29udGVudCA9IGNyZWF0ZVNxdWFyZUNvbnRlbnQoaWQpO1xuXG4gICAgICBzcXVhcmUuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgIHNxdWFyZXMuc2V0KGlkLCBjb250ZW50KTtcbiAgICB9XG5cbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cblxuICBsZXQgcyA9IGdldFNxdWFyZXMoKTtcbiAgbGV0IHUgPSBnZXRVbml0TGlzdCgpO1xuICBsZXQgcGVlcklkcyA9IHRvTG93ZXJDYXNlKGdldFBlZXJzKHMsIGdldFVuaXRzKHMsIHUpKSk7XG4gIGxldCBwZWVycyA9IG5ldyBNYXAoKTtcblxuICBmb3IgKGxldCBbcywgcF0gb2YgcGVlcklkcykge1xuICAgIHBlZXJzLnNldChzLCBbLi4ucF0ubWFwKHggPT4gc3F1YXJlcy5nZXQoeCkpKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGVlcnM6IHBlZXJzLFxuICAgIHNxdWFyZXM6IHNxdWFyZXNcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9zdWRva3UtZ3JpZC1idWlsZGVyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==