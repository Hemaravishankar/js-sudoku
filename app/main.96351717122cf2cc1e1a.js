!function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}var e={};r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=1)}([function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(){return g}function a(){return m}function o(){return p}function u(){return s(g,p)}function l(){return[].concat(n(p)).map(function(t){return s(g,new Set(t))}).concat([].concat(n(g)).map(function(t){return s(new Set(t),p)})).concat(function(){var t=[];return[["A","B","C"],["D","E","F"],["G","H","I"]].forEach(function(r){[["1","2","3"],["4","5","6"],["7","8","9"]].forEach(function(e){t.push(s(new Set(r),new Set(e)))})}),t}())}function c(t,r){var e=new Map;return[].concat(n(t)).forEach(function(t){return e.set(t,r.filter(function(r){return r.has(t)}))}),e}function f(t,r){var e=new Map;return[].concat(n(t)).forEach(function(t){var i=r.get(t);e.set(t,new Set([].concat(n(new Set([].concat(n(i[0]),n(i[1]),n(i[2]))))).filter(function(r){return r!==t})))}),e}function s(t,r){var e=new Set,n=!0,i=!1,a=void 0;try{for(var o,u=t.values()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,c=!0,f=!1,s=void 0;try{for(var h,v=(r.values()||r)[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var y=h.value;e.add(l+y)}}catch(t){f=!0,s=t}finally{try{!c&&v.return&&v.return()}finally{if(f)throw s}}}}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}function h(t,r){var e=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value,l=r(u);if(l)return l}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return!1}function v(t){for(var r=[].concat(n(t)),e=r.length,i=void 0,a=void 0;0!==e;)a=Math.floor(Math.random()*e),e-=1,i=r[e],r[e]=r[a],r[a]=i;return r}function y(t){var r=!0,e=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){if(!i.value)return!1}}catch(t){e=!0,n=t}finally{try{!r&&a.return&&a.return()}finally{if(e)throw n}}return!0}function d(t,r){return Math.floor(Math.random()*(r-t+1))+t}Object.defineProperty(r,"__esModule",{value:!0}),r.getRows=i,r.getLowerCaseRows=a,r.getCols=o,r.getSquares=u,r.getUnitList=l,r.getUnits=c,r.getPeers=f,r.cross=s,r.some=h,r.shuffle=v,r.all=y,r.getRandomInt=d;var g=new Set(["A","B","C","D","E","F","G","H","I"]),p=new Set(["1","2","3","4","5","6","7","8","9"]),m=new Set(["a","b","c","d","e","f","g","h","i"])},function(t,r,e){"use strict";e(2);var n=e(3);new(function(t){return t&&t.__esModule?t:{default:t}}(n).default)},function(t,r){},function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),l=e(4),c=n(l),f=e(5),s=n(f),h=function(){function t(){a(this,t),this.game=c.default.getGame(),this.puzzle=this.game.puzzle,this.solution=this.game.solution,this.grid=new s.default,this.grid.fillClues(this.puzzle),this.setInputEvents()}return u(t,[{key:"setInputEvents",value:function(){var r=this,e=this.grid,n=this.grid.squares,i=!0,a=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,s=o(f,2),h=s[0],v=s[1];!function(t,r){r.onclick=function(){e.highlightSquare(r),e.highlightPeers(t)}}(h,v)}}catch(t){a=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw u}}document.onkeydown=function(n){var i=n.key,a=n.keyCode;a>=49&&a<=57?(e.setSquareValue(i,r.puzzle),r.solved()&&t.displayMessage()):8===a&&e.setSquareValue("",r.puzzle)}}},{key:"solved",value:function(){var t=!0,r=!1,e=void 0;try{for(var n,a=this.solution[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var u=n.value,l=o(u,2),c=l[0],f=l[1];if([].concat(i(this.puzzle.get(c)))[0]!==[].concat(i(f))[0])return!1}}catch(t){r=!0,e=t}finally{try{!t&&a.return&&a.return()}finally{if(r)throw e}}return!0}}],[{key:"displayMessage",value:function(){window.alert("Congratulations! You solved the puzzle.")}}]),t}();r.default=h},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(t){var r=new Map;w.forEach(function(t){return r.set(t,m)});var e=!0,n=!1,i=void 0;try{for(var u,l=a(t).entries()[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value,f=d(c,2),s=f[0],h=f[1];if(m.has(h)&&!o(r,s,h))return!1}}catch(t){n=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}return r}function a(t){for(var r=t.filter(function(t){return m.has(t)||"0"===t||"."===t}),e=new Map,i=[].concat(n(w)),a=0;a<i.length;a++)e.set(i[a],r[a]);return e}function o(t,r,e){var i=[].concat(n(t.get(r))).filter(function(t){return t!==e});return!!(0,g.all)(i.map(function(e){return u(t,r,e)}))&&t}function u(t,r,e){if(!t.get(r).has(e))return t;if(t.set(r,new Set([].concat(n(t.get(r))).filter(function(t){return t!==e}))),!t.get(r).size)return!1;if(1===t.get(r).size){var i=[].concat(n(t.get(r)))[0];if(!(0,g.all)([].concat(n(A.get(r))).map(function(r){return u(t,r,i)})))return!1}var a=!0,l=!1,c=void 0;try{for(var f,s=S.get(r)[Symbol.iterator]();!(a=(f=s.next()).done);a=!0){var h=f.value,v=[].concat(n(h)).filter(function(r){return t.get(r).has(e)});if(!v.length)return!1;if(1===v.length&&!o(t,v[0],e))return!1}}catch(t){l=!0,c=t}finally{try{!a&&s.return&&s.return()}finally{if(l)throw c}}return t}function l(t){return c(i(t))}function c(t){if(!t)return!1;if((0,g.all)([].concat(n(w)).map(function(r){return 1===t.get(r).size})))return t;var r=[].concat(n(w)).filter(function(r){return t.get(r).size>1}).sort(function(r,e){return t.get(r).size-t.get(e).size})[0];return(0,g.some)(t.get(r),function(e){return c(o(new Map(t),r,e))})}function f(t){function r(r){var e=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var l=o.value;if([].concat(n(t.get(l))).filter(function(t){return!m.has(t)}).length>0)return!1}}catch(t){i=!0,a=t}finally{try{!e&&u.return&&u.return()}finally{if(i)throw a}}return!0}return t&&(0,g.all)(b.map(function(t){return r(t)}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:17,r=new Map;w.forEach(function(t){return r.set(t,m)});var e=!0,i=!1,a=void 0;try{for(var u,l=(0,g.shuffle)(w)[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value;if(!o(r,c,h(r.get(c))))break;var f=[].concat(n(w)).filter(function(t){return 1===r.get(t).size}).map(function(t){return r.get(t)});if(f.length>=t&&new Set(f).size>=8)return[].concat(n(w)).map(function(t){return 1===r.get(t).size?[].concat(n(r.get(t)))[0]:"0"})}}catch(t){i=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw a}}return s(t)}function h(t){return[].concat(n(t))[(0,g.getRandomInt)(0,t.size-1)]}function v(t,r){var e=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var l=o.value,c=d(l,2),f=c[0],s=c[1];if([].concat(n(r.get(f)))[0]!==[].concat(n(s))[0])return!1}}catch(t){i=!0,a=t}finally{try{!e&&u.return&&u.return()}finally{if(i)throw a}}return!0}function y(t){var r=[],e={},i=(0,g.shuffle)(w);[].concat(n(w)).forEach(function(i,a){r.push([].concat(n(t.get(i)))[0]),e[i]=a});for(var a=new Map,o=0;o<i.length;o++){var u=e[i[o]],c=r[u];r[u]="0",v(t,l(r))?a.set(i[o],"0"):(r[u]=c,a.set(i[o],c))}return a}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=e(0),p={easy:28,medium:37,hard:45,master:65},m=(0,g.getCols)(),w=(0,g.getSquares)(),b=(0,g.getUnitList)(),S=(0,g.getUnits)(w,b),A=(0,g.getPeers)(w,S);r.default={getGame:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.easy,r=l(s(81-t));!f(r);)r=l(s());return{puzzle:y(r),solution:r}}}},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),u=e(6),l=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-container";i(this,t),this.grid=(0,u.build)(r),this.peers=this.grid.peers,this.squares=this.grid.squares}return o(t,[{key:"fillClues",value:function(t){var r=!0,e=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,c=a(l,2),f=c[0],s=c[1],h=[].concat(n(s))[0],v=this.squares.get(f.toLowerCase());"0"===h||"."===h?v.innerHTML="":(v.classList.add("clue"),v.innerHTML=h)}}catch(t){e=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(e)throw i}}}},{key:"setSquareValue",value:function(t,r){this.highlightedSquare&&(r.set(this.highlightedSquare.id.toUpperCase(),new Set(t)),this.highlightedSquare.innerHTML=t)}},{key:"highlightSquare",value:function(t){t.classList.contains("clue")||(this.highlightedSquare&&(this.highlightedSquare.classList.remove("focused-content"),this.highlightedSquare.classList.remove("highlight")),this.highlightedSquare=t,this.highlightedSquare.classList.add("focused-content"))}},{key:"highlightPeers",value:function(t){this.squares.get(t).classList.contains("clue")||(this.highlightedPeers&&this.highlightedPeers.forEach(function(r){r.id!==t&&r.classList.remove("highlight")}),this.highlightedPeers=this.peers.get(t),this.highlightedPeers.forEach(function(t){return t.classList.add("highlight")}))}}]),t}();r.default=l},function(t,r,e){"use strict";function n(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function i(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-container",r=[].concat(n((0,o.getLowerCaseRows)())),e=[].concat(n((0,o.getCols)())),i=document.getElementById(t),h=new Map,v=i.offsetWidth?i.offsetWidth/u-3:50,y=0;y<u;y++){for(var d=l(v),g=0;g<u;g++){var p=""+r[y]+e[g],m=c(v),w=f(p);m.appendChild(w),d.appendChild(m),h.set(p,w)}i.appendChild(d)}var b=(0,o.getSquares)(),S=(0,o.getUnitList)(),A=s((0,o.getPeers)(b,(0,o.getUnits)(b,S))),x=new Map,M=!0,z=!1,q=void 0;try{for(var E,C=A[Symbol.iterator]();!(M=(E=C.next()).done);M=!0){var L=E.value,P=a(L,2),_=P[0],k=P[1];x.set(_,[].concat(n(k)).map(function(t){return h.get(t)}))}}catch(t){z=!0,q=t}finally{try{!M&&C.return&&C.return()}finally{if(z)throw q}}return{peers:x,squares:h}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.build=i;var o=e(0),u=9,l=function(t){var r=document.createElement("div");return r.setAttribute("class","row"),r.style.height=t+"px",r},c=function(t){var r=document.createElement("div");return r.setAttribute("class","col-1 square"),r.style.height=t+"px",r.style.width=t+"px",r.style.maxWidth=t+"px",r.style.flex="0 0 "+t+"px",r},f=function(t){var r=document.createElement("div");return r.id=t,r.setAttribute("class","square-content"),r},s=function(t){var r=new Map,e=!0,i=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value,f=a(c,2),s=f[0],h=f[1];r.set(s.toLowerCase(),new Set([].concat(n(h)).map(function(t){return t.toLowerCase()})))}}catch(t){i=!0,o=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw o}}return r}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi45NjM1MTcxNzEyMmNmMmNjMWUxYS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOTYzNTE3MTcxMjJjZjJjYzFlMWEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3N1ZG9rdS1ncmlkLXV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3N1ZG9rdS11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc3Vkb2t1LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zdWRva3UtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9zdWRva3UtZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc3Vkb2t1LWdyaWQtYnVpbGRlci5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJnZXRSb3dzIiwicm93cyIsImdldExvd2VyQ2FzZVJvd3MiLCJsb3dlckNhc2VSb3dzIiwiZ2V0Q29scyIsImNvbHMiLCJnZXRTcXVhcmVzIiwiY3Jvc3MiLCJnZXRVbml0TGlzdCIsImNvbmNhdCIsIm1hcCIsIlNldCIsInIiLCJ1IiwiZm9yRWFjaCIsInB1c2giLCJnZXRVbml0cyIsInNxdWFyZXMiLCJ1bml0bGlzdCIsInVuaXRzIiwiTWFwIiwic2V0IiwiZmlsdGVyIiwiaGFzIiwiZ2V0UGVlcnMiLCJwZWVycyIsIngiLCJhIiwiYiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJ2YWx1ZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiYTEiLCJ2YWx1ZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImIxIiwiYWRkIiwiZXJyIiwicmV0dXJuIiwic29tZSIsInNlcSIsImZ1bmMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJyZXN1bHQiLCJzaHVmZmxlIiwiYXJyYXkiLCJjdXJyZW50SW5kZXgiLCJ0ZW1wb3JhcnlWYWx1ZSIsInJhbmRvbUluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWxsIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQiLCJfZGlkSXRlcmF0b3JFcnJvcjQiLCJfaXRlcmF0b3JFcnJvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwiZ2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiX3N1ZG9rdSIsIm9iaiIsImRlZmF1bHQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9zbGljZWRUb0FycmF5Iiwic2xpY2VJdGVyYXRvciIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3N1ZG9rdUdlbmVyYXRvciIsIl9zdWRva3VHZW5lcmF0b3IyIiwiX3N1ZG9rdUdyaWQiLCJfc3Vkb2t1R3JpZDIiLCJTdWRva3UiLCJ0aGlzIiwiZ2FtZSIsImdldEdhbWUiLCJwdXp6bGUiLCJzb2x1dGlvbiIsImdyaWQiLCJmaWxsQ2x1ZXMiLCJzZXRJbnB1dEV2ZW50cyIsIl90aGlzIiwiX3JlZiIsIl9yZWYyIiwiZWwiLCJvbmNsaWNrIiwiaGlnaGxpZ2h0U3F1YXJlIiwiaGlnaGxpZ2h0UGVlcnMiLCJkb2N1bWVudCIsIm9ua2V5ZG93biIsImUiLCJrZXljb2RlIiwia2V5Q29kZSIsInNldFNxdWFyZVZhbHVlIiwic29sdmVkIiwiZGlzcGxheU1lc3NhZ2UiLCJfcmVmMyIsIl9yZWY0Iiwid2luZG93IiwiYWxlcnQiLCJwYXJzZUdyaWQiLCJkaWdpdHMiLCJncmlkVmFsdWVzIiwiZW50cmllcyIsImFzc2lnbiIsImNoYXJzIiwib3RoZXJzIiwiX3N1ZG9rdUdyaWRVdGlsIiwiZDIiLCJlbGltaW5hdGUiLCJzaXplIiwiczIiLCJ1bml0IiwiZHBsYWNlcyIsInNvbHZlIiwic2VhcmNoIiwic29ydCIsInMxIiwidW5pdFNvbHZlZCIsInJhbmRvbVB1enpsZSIsImFyZ3VtZW50cyIsInJhbmRvbVZhbHVlIiwiZHMiLCJpc1VuaXF1ZSIsIm9yaWdpbmFsIiwidGVzdCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241IiwiX2RpZEl0ZXJhdG9yRXJyb3I1IiwiX2l0ZXJhdG9yRXJyb3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsImNyZWF0ZVB1enpsZSIsImluZGljZXMiLCJzaHVmZmxlZCIsImoiLCJ2IiwibGV2ZWwiLCJlYXN5IiwibWVkaXVtIiwiaGFyZCIsIm1hc3RlciIsImRpZmZpY3VsdHkiLCJfc3Vkb2t1R3JpZEJ1aWxkZXIiLCJTdWRva3VHcmlkIiwiaWQiLCJidWlsZCIsImNsdWVzIiwiY2x1ZSIsInNxdWFyZSIsInRvTG93ZXJDYXNlIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiaGlnaGxpZ2h0ZWRTcXVhcmUiLCJ0b1VwcGVyQ2FzZSIsImNvbnRhaW5zIiwicmVtb3ZlIiwiaGlnaGxpZ2h0ZWRQZWVycyIsImVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbGxTaXplIiwib2Zmc2V0V2lkdGgiLCJyb3ciLCJjcmVhdGVSb3ciLCJjcmVhdGVTcXVhcmUiLCJjb250ZW50IiwiY3JlYXRlU3F1YXJlQ29udGVudCIsImFwcGVuZENoaWxkIiwicGVlcklkcyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImhlaWdodCIsIndpZHRoIiwibWF4V2lkdGgiLCJmbGV4IiwiZDEiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBZixHQUNBLEdBQUFRLEdBQUFSLEtBQUFnQixXQUNBLFdBQTJCLE1BQUFoQixHQUFBLFNBQzNCLFdBQWlDLE1BQUFBLEdBRWpDLE9BREFKLEdBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBUSxFQUFBQyxHQUFzRCxNQUFBUixRQUFBUyxVQUFBQyxlQUFBakIsS0FBQWMsRUFBQUMsSUFHdER0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QUFlLEdBQUk1SyxRQUFJRixPQUFBaEIsRUFBSWpCLElBQUdrQyxJQUFJLFNBQUF1TSxHQUFBLE1BQU1BLEdBQUcxQixtQkFIN0IsTUFBQXRJLEdBQUFuQixHQUFBLEVBQUFDLEVBQUFrQixFQUFBLGFBQUFwQixHQUFBSyxFQUFBZ0IsUUFBQWhCLEVBQUFnQixTQUFBLFdBQUFwQixFQUFBLEtBQUFDLElBTTdCLE1BQU80QiIsImZpbGUiOiJtYWluLjk2MzUxNzE3MTIyY2YyY2MxZTFhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5nZXRSb3dzID0gZ2V0Um93cztcbmV4cG9ydHMuZ2V0TG93ZXJDYXNlUm93cyA9IGdldExvd2VyQ2FzZVJvd3M7XG5leHBvcnRzLmdldENvbHMgPSBnZXRDb2xzO1xuZXhwb3J0cy5nZXRTcXVhcmVzID0gZ2V0U3F1YXJlcztcbmV4cG9ydHMuZ2V0VW5pdExpc3QgPSBnZXRVbml0TGlzdDtcbmV4cG9ydHMuZ2V0VW5pdHMgPSBnZXRVbml0cztcbmV4cG9ydHMuZ2V0UGVlcnMgPSBnZXRQZWVycztcbmV4cG9ydHMuY3Jvc3MgPSBjcm9zcztcbmV4cG9ydHMuc29tZSA9IHNvbWU7XG5leHBvcnRzLnNodWZmbGUgPSBzaHVmZmxlO1xuZXhwb3J0cy5hbGwgPSBhbGw7XG5leHBvcnRzLmdldFJhbmRvbUludCA9IGdldFJhbmRvbUludDtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciByb3dzID0gbmV3IFNldChbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJ10pO1xudmFyIGNvbHMgPSBuZXcgU2V0KFsnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknXSk7XG52YXIgbG93ZXJDYXNlUm93cyA9IG5ldyBTZXQoWydhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaSddKTtcblxuZnVuY3Rpb24gZ2V0Um93cygpIHtcbiAgcmV0dXJuIHJvd3M7XG59XG5cbmZ1bmN0aW9uIGdldExvd2VyQ2FzZVJvd3MoKSB7XG4gIHJldHVybiBsb3dlckNhc2VSb3dzO1xufVxuXG5mdW5jdGlvbiBnZXRDb2xzKCkge1xuICByZXR1cm4gY29scztcbn1cblxuZnVuY3Rpb24gZ2V0U3F1YXJlcygpIHtcbiAgcmV0dXJuIGNyb3NzKHJvd3MsIGNvbHMpO1xufVxuXG5mdW5jdGlvbiBnZXRVbml0TGlzdCgpIHtcbiAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY29scykpLm1hcChmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiBjcm9zcyhyb3dzLCBuZXcgU2V0KGMpKTtcbiAgfSkuY29uY2F0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocm93cykpLm1hcChmdW5jdGlvbiAocikge1xuICAgIHJldHVybiBjcm9zcyhuZXcgU2V0KHIpLCBjb2xzKTtcbiAgfSkpLmNvbmNhdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHUgPSBbXTtcbiAgICBbWydBJywgJ0InLCAnQyddLCBbJ0QnLCAnRScsICdGJ10sIFsnRycsICdIJywgJ0knXV0uZm9yRWFjaChmdW5jdGlvbiAocikge1xuICAgICAgW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddLCBbJzcnLCAnOCcsICc5J11dLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgdS5wdXNoKGNyb3NzKG5ldyBTZXQociksIG5ldyBTZXQoYykpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHU7XG4gIH0oKSk7XG59XG5cbmZ1bmN0aW9uIGdldFVuaXRzKHNxdWFyZXMsIHVuaXRsaXN0KSB7XG4gIHZhciB1bml0cyA9IG5ldyBNYXAoKTtcbiAgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSkuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB1bml0cy5zZXQocywgdW5pdGxpc3QuZmlsdGVyKGZ1bmN0aW9uICh1KSB7XG4gICAgICByZXR1cm4gdS5oYXMocyk7XG4gICAgfSkpO1xuICB9KTtcblxuICByZXR1cm4gdW5pdHM7XG59XG5cbmZ1bmN0aW9uIGdldFBlZXJzKHNxdWFyZXMsIHVuaXRzKSB7XG4gIHZhciBwZWVycyA9IG5ldyBNYXAoKTtcblxuICBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNxdWFyZXMpKS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgdmFyIHAgPSB1bml0cy5nZXQocyk7XG4gICAgcGVlcnMuc2V0KHMsIG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocFswXSksIF90b0NvbnN1bWFibGVBcnJheShwWzFdKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBbMl0pKSkpKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiB4ICE9PSBzO1xuICAgIH0pKSk7XG4gIH0pO1xuXG4gIHJldHVybiBwZWVycztcbn1cblxuZnVuY3Rpb24gY3Jvc3MoYSwgYikge1xuICB2YXIgYyA9IG5ldyBTZXQoKTtcblxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBhLnZhbHVlcygpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgdmFyIGExID0gX3N0ZXAudmFsdWU7XG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IChiLnZhbHVlcygpIHx8IGIpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGIxID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgYy5hZGQoYTEgKyBiMSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIHNvbWUoc2VxLCBmdW5jKSB7XG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBzZXFbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgIHZhciBkID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYyhkKTtcbiAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IzKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogRmlzaGVyLVlhdGVzIFNodWZmbGVcbiAqIFNlZSBodHRwOi8vYml0Lmx5LzJnTVhpalhcbiAqL1xuZnVuY3Rpb24gc2h1ZmZsZShzZXEpIHtcbiAgdmFyIGFycmF5ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzZXEpKTtcbiAgdmFyIGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIHRlbXBvcmFyeVZhbHVlID0gdm9pZCAwLFxuICAgICAgcmFuZG9tSW5kZXggPSB2b2lkIDA7XG5cbiAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cbiAgd2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xuXG4gICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50Li4uXG4gICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjdXJyZW50SW5kZXgpO1xuICAgIGN1cnJlbnRJbmRleCAtPSAxO1xuXG4gICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgIHRlbXBvcmFyeVZhbHVlID0gYXJyYXlbY3VycmVudEluZGV4XTtcbiAgICBhcnJheVtjdXJyZW50SW5kZXhdID0gYXJyYXlbcmFuZG9tSW5kZXhdO1xuICAgIGFycmF5W3JhbmRvbUluZGV4XSA9IHRlbXBvcmFyeVZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBhbGwodmFsdWVzKSB7XG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjQgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yNCA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSB2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcbiAgICAgIHZhciB2ID0gX3N0ZXA0LnZhbHVlO1xuXG4gICAgICBpZiAoIXYpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjQpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG59XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3N1ZG9rdSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfc3Vkb2t1MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N1ZG9rdSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbm5ldyBfc3Vkb2t1Mi5kZWZhdWx0KCk7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3N1ZG9rdUdlbmVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfc3Vkb2t1R2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N1ZG9rdUdlbmVyYXRvcik7XG5cbnZhciBfc3Vkb2t1R3JpZCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfc3Vkb2t1R3JpZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdWRva3VHcmlkKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTdWRva3UgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN1ZG9rdSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Vkb2t1KTtcblxuICAgIHRoaXMuZ2FtZSA9IF9zdWRva3VHZW5lcmF0b3IyLmRlZmF1bHQuZ2V0R2FtZSgpO1xuICAgIHRoaXMucHV6emxlID0gdGhpcy5nYW1lLnB1enpsZTtcbiAgICB0aGlzLnNvbHV0aW9uID0gdGhpcy5nYW1lLnNvbHV0aW9uO1xuXG4gICAgdGhpcy5ncmlkID0gbmV3IF9zdWRva3VHcmlkMi5kZWZhdWx0KCk7XG4gICAgdGhpcy5ncmlkLmZpbGxDbHVlcyh0aGlzLnB1enpsZSk7XG4gICAgdGhpcy5zZXRJbnB1dEV2ZW50cygpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN1ZG9rdSwgW3tcbiAgICBrZXk6ICdzZXRJbnB1dEV2ZW50cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldElucHV0RXZlbnRzKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGdyaWQgPSB0aGlzLmdyaWQ7XG4gICAgICB2YXIgc3F1YXJlcyA9IHRoaXMuZ3JpZC5zcXVhcmVzO1xuXG4gICAgICAvLyBTZXR1cCB0b3VjaC9jbGljayBldmVudHMgZm9yIGVhY2ggc3F1YXJlLlxuXG4gICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChzLCBlbCkge1xuICAgICAgICBlbC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGdyaWQuaGlnaGxpZ2h0U3F1YXJlKGVsKTtcbiAgICAgICAgICBncmlkLmhpZ2hsaWdodFBlZXJzKHMpO1xuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHNxdWFyZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIF9yZWYgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpO1xuXG4gICAgICAgICAgdmFyIHMgPSBfcmVmMlswXTtcbiAgICAgICAgICB2YXIgZWwgPSBfcmVmMlsxXTtcblxuICAgICAgICAgIF9sb29wKHMsIGVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElucHV0IGV2ZW50XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZS5rZXk7XG4gICAgICAgIHZhciBrZXljb2RlID0gZS5rZXlDb2RlO1xuXG4gICAgICAgIGlmIChrZXljb2RlID49IDQ5ICYmIGtleWNvZGUgPD0gNTcpIHtcbiAgICAgICAgICBncmlkLnNldFNxdWFyZVZhbHVlKHZhbHVlLCBfdGhpcy5wdXp6bGUpO1xuICAgICAgICAgIGlmIChfdGhpcy5zb2x2ZWQoKSkgU3Vkb2t1LmRpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gOCkge1xuICAgICAgICAgIGdyaWQuc2V0U3F1YXJlVmFsdWUoJycsIF90aGlzLnB1enpsZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc29sdmVkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc29sdmVkKCkge1xuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLnNvbHV0aW9uW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIF9yZWYzID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpO1xuXG4gICAgICAgICAgdmFyIHMgPSBfcmVmNFswXTtcbiAgICAgICAgICB2YXIgZCA9IF9yZWY0WzFdO1xuXG4gICAgICAgICAgaWYgKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5wdXp6bGUuZ2V0KHMpKSlbMF0gIT09IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZCkpWzBdKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdkaXNwbGF5TWVzc2FnZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlKCkge1xuICAgICAgd2luZG93LmFsZXJ0KCdDb25ncmF0dWxhdGlvbnMhIFlvdSBzb2x2ZWQgdGhlIHB1enpsZS4nKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3Vkb2t1O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTdWRva3U7XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBBIEphdmFTY3JpcHQgcG9ydCBiYXNlZCBvbiBcIlNvbHZpbmcgRXZlcnkgU3Vkb2t1IFB1enpsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGJ5IFBldGVyIE5vcnZpZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIGFydGljbGUgY2FuIGJlIGZvdW5kIGhlcmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIC0gaHR0cDovL25vcnZpZy5jb20vc3Vkb2t1Lmh0bWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIG9yaWdpbmFsIFB5dGhvbiBzb3VyY2UgY2FuIGJlIGZvdW5kIGhlcmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIC0gaHR0cHM6Ly9naXRodWIuY29tL25vcnZpZy9weXR1ZGVzL2Jsb2IvbWFzdGVyL3N1ZG9rdS5weVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxudmFyIF9zdWRva3VHcmlkVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG52YXIgbGV2ZWwgPSB7XG4gIGVhc3k6IDI4LFxuICBtZWRpdW06IDM3LFxuICBoYXJkOiA0NSxcbiAgbWFzdGVyOiA2NVxufTtcblxudmFyIGRpZ2l0cyA9ICgwLCBfc3Vkb2t1R3JpZFV0aWwuZ2V0Q29scykoKTtcbnZhciBzcXVhcmVzID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRTcXVhcmVzKSgpO1xudmFyIHVuaXRsaXN0ID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRVbml0TGlzdCkoKTtcblxudmFyIHVuaXRzID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRVbml0cykoc3F1YXJlcywgdW5pdGxpc3QpO1xudmFyIHBlZXJzID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRQZWVycykoc3F1YXJlcywgdW5pdHMpO1xuXG4vKipcbiAqIENvbnZlcnQgZ3JpZCB0byBhIGRpY3Qgb2YgcG9zc2libGUgdmFsdWVzLCB7c3F1YXJlOiBkaWdpdHN9LFxuICogb3IgcmV0dXJuIGZhbHNlIGlmIGEgY29udHJhZGljdGlvbiBpcyBkZXRlY3RlZC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VHcmlkKGdyaWQpIHtcbiAgdmFyIHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgc3F1YXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5zZXQocywgZGlnaXRzKTtcbiAgfSk7XG5cbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZ3JpZFZhbHVlcyhncmlkKS5lbnRyaWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgX3JlZiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKTtcblxuICAgICAgdmFyIHMgPSBfcmVmMlswXTtcbiAgICAgIHZhciBkID0gX3JlZjJbMV07XG5cbiAgICAgIGlmIChkaWdpdHMuaGFzKGQpICYmICFhc3NpZ24odmFsdWVzLCBzLCBkKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbi8qKlxuICogQ29udmVydCBncmlkIGludG8gYSBkaWN0IG9mIHtzcXVhcmU6IGNoYXJ9IHdpdGggJzAnIG9yICcuJyBmb3IgZW1wdGllcy5cbiAqL1xuZnVuY3Rpb24gZ3JpZFZhbHVlcyhncmlkKSB7XG4gIHZhciBjaGFycyA9IGdyaWQuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuIGRpZ2l0cy5oYXMoYykgfHwgYyA9PT0gJzAnIHx8IGMgPT09ICcuJztcbiAgfSk7XG4gIHZhciB2YWx1ZXMgPSBuZXcgTWFwKCk7XG4gIHZhciBzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzcXVhcmVzKSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWVzLnNldChzW2ldLCBjaGFyc1tpXSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufVxuXG4vKipcbiAqIEVsaW1pbmF0ZSBhbGwgdGhlIG90aGVyIHZhbHVlcyAoZXhjZXB0IGQpIGZyb20gdmFsdWVzW3NdIGFuZCBwcm9wYWdhdGUuXG4gKiBSZXR1cm4gdmFsdWVzLCBleGNlcHQgcmV0dXJuIEZhbHNlIGlmIGEgY29udHJhZGljdGlvbiBpcyBkZXRlY3RlZC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduKHZhbHVlcywgcywgZCkge1xuICB2YXIgb3RoZXJzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMuZ2V0KHMpKSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIHggIT09IGQ7XG4gIH0pO1xuICByZXR1cm4gKDAsIF9zdWRva3VHcmlkVXRpbC5hbGwpKG90aGVycy5tYXAoZnVuY3Rpb24gKGQyKSB7XG4gICAgcmV0dXJuIGVsaW1pbmF0ZSh2YWx1ZXMsIHMsIGQyKTtcbiAgfSkpID8gdmFsdWVzIDogZmFsc2U7XG59XG5cbi8qKlxuICogRWxpbWluYXRlIGQgZnJvbSB2YWx1ZXNbc107IHByb3BhZ2F0ZSB3aGVuIHZhbHVlcyBvciBwbGFjZXMgPD0gMi5cbiAqIFJldHVybiB2YWx1ZXMsIGV4Y2VwdCByZXR1cm4gRmFsc2UgaWYgYSBjb250cmFkaWN0aW9uIGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBlbGltaW5hdGUodmFsdWVzLCBzLCBkKSB7XG4gIGlmICghdmFsdWVzLmdldChzKS5oYXMoZCkpIHJldHVybiB2YWx1ZXM7XG5cbiAgdmFsdWVzLnNldChzLCBuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmFsdWVzLmdldChzKSkpLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiB4ICE9PSBkO1xuICB9KSkpO1xuXG4gIGlmICghdmFsdWVzLmdldChzKS5zaXplKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMSkge1xuICAgIHZhciBkMiA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmFsdWVzLmdldChzKSkpWzBdO1xuXG4gICAgaWYgKCEoMCwgX3N1ZG9rdUdyaWRVdGlsLmFsbCkoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwZWVycy5nZXQocykpKS5tYXAoZnVuY3Rpb24gKHMyKSB7XG4gICAgICByZXR1cm4gZWxpbWluYXRlKHZhbHVlcywgczIsIGQyKTtcbiAgICB9KSkpIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB1bml0cy5nZXQocylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgIHZhciB1bml0ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICB2YXIgZHBsYWNlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodW5pdCkpLmZpbHRlcihmdW5jdGlvbiAoczIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5nZXQoczIpLmhhcyhkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWRwbGFjZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoZHBsYWNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKCFhc3NpZ24odmFsdWVzLCBkcGxhY2VzWzBdLCBkKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gc29sdmUoZ3JpZCkge1xuICByZXR1cm4gc2VhcmNoKHBhcnNlR3JpZChncmlkKSk7XG59XG5cbi8qKlxuICogVXNpbmcgZGVwdGgtZmlyc3Qgc2VhcmNoIGFuZCBwcm9wYWdhdGlvbiwgdHJ5IGFsbCBwb3NzaWJsZSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNlYXJjaCh2YWx1ZXMpIHtcbiAgaWYgKCF2YWx1ZXMpIHJldHVybiBmYWxzZTtcblxuICBpZiAoKDAsIF9zdWRva3VHcmlkVXRpbC5hbGwpKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLm1hcChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDE7XG4gIH0pKSkgcmV0dXJuIHZhbHVlcztcblxuICB2YXIgcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMpLnNpemUgPiAxO1xuICB9KS5zb3J0KGZ1bmN0aW9uIChzMSwgczIpIHtcbiAgICByZXR1cm4gdmFsdWVzLmdldChzMSkuc2l6ZSAtIHZhbHVlcy5nZXQoczIpLnNpemU7XG4gIH0pWzBdO1xuXG4gIHJldHVybiAoMCwgX3N1ZG9rdUdyaWRVdGlsLnNvbWUpKHZhbHVlcy5nZXQocyksIGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIHNlYXJjaChhc3NpZ24obmV3IE1hcCh2YWx1ZXMpLCBzLCBkKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEEgcHV6emxlIGlzIHNvbHZlZCBpZiBlYWNoIHVuaXQgaXMgYSBwZXJtdXRhdGlvbiBvZiB0aGUgZGlnaXRzIDEgdG8gOS5cbiAqL1xuZnVuY3Rpb24gc29sdmVkKHZhbHVlcykge1xuICBmdW5jdGlvbiB1bml0U29sdmVkKHVuaXQpIHtcbiAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcbiAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB1bml0W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgIHZhciBzID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgIHZhciBkaWZmID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMuZ2V0KHMpKSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuICFkaWdpdHMuaGFzKGQpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGRpZmYubGVuZ3RoID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTtcbiAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZXMgJiYgKDAsIF9zdWRva3VHcmlkVXRpbC5hbGwpKHVuaXRsaXN0Lm1hcChmdW5jdGlvbiAodSkge1xuICAgIHJldHVybiB1bml0U29sdmVkKHUpO1xuICB9KSk7XG59XG5cbi8qKlxuICogTWFrZSBhIHJhbmRvbSBwdXp6bGUgd2l0aCBOIG9yIG1vcmUgYXNzaWdubWVudHMuIFJlc3RhcnQgb24gY29udHJhZGljdGlvbnMuXG4gKiBOb3RlIHRoZSByZXN1bHRpbmcgcHV6emxlIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIHNvbHZhYmxlLCBidXQgZW1waXJpY2FsbHlcbiAqIGFib3V0IDk5LjglIG9mIHRoZW0gYXJlIHNvbHZhYmxlLiBTb21lIGhhdmUgbXVsdGlwbGUgc29sdXRpb25zXG4gKi9cbmZ1bmN0aW9uIHJhbmRvbVB1enpsZSgpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDE3O1xuXG4gIHZhciB2YWx1ZXMgPSBuZXcgTWFwKCk7XG4gIHNxdWFyZXMuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB2YWx1ZXMuc2V0KHMsIGRpZ2l0cyk7XG4gIH0pO1xuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjQgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yNCA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLnNodWZmbGUpKHNxdWFyZXMpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA0OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gKF9zdGVwNCA9IF9pdGVyYXRvcjQubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlKSB7XG4gICAgICB2YXIgcyA9IF9zdGVwNC52YWx1ZTtcblxuICAgICAgaWYgKCFhc3NpZ24odmFsdWVzLCBzLCByYW5kb21WYWx1ZSh2YWx1ZXMuZ2V0KHMpKSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHZhciBkcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gdmFsdWVzLmdldChzKS5zaXplID09PSAxO1xuICAgICAgfSkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChkcy5sZW5ndGggPj0gbiAmJiBuZXcgU2V0KGRzKS5zaXplID49IDgpIHtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgIHJldHVybiB2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDEgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHZhbHVlcy5nZXQocykpKVswXSA6ICcwJztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmFuZG9tUHV6emxlKG4pO1xufVxuXG5mdW5jdGlvbiByYW5kb21WYWx1ZSh2YWx1ZXMpIHtcbiAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmFsdWVzKSlbKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRSYW5kb21JbnQpKDAsIHZhbHVlcy5zaXplIC0gMSldO1xufVxuXG5mdW5jdGlvbiBpc1VuaXF1ZShvcmlnaW5hbCwgdGVzdCkge1xuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3I1ID0gb3JpZ2luYWxbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDU7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSAoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IHRydWUpIHtcbiAgICAgIHZhciBfcmVmMyA9IF9zdGVwNS52YWx1ZTtcblxuICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpO1xuXG4gICAgICB2YXIgcyA9IF9yZWY0WzBdO1xuICAgICAgdmFyIGQgPSBfcmVmNFsxXTtcblxuICAgICAgaWYgKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGVzdC5nZXQocykpKVswXSAhPT0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkKSlbMF0pIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yNSA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3I1ID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ICYmIF9pdGVyYXRvcjUucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjUucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjUpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I1O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgdGhyb3VnaCB0aGUgcmFuZG9tbHkgc2h1ZmZsZWQgc3F1YXJlcy5cbiAqIEFmdGVyIHJlbW92aW5nIGVhY2ggc3F1YXJlIGZyb20gdGhlIHNvbHV0aW9uXG4gKiBzb2x2ZSBpdCBhbmQgdGVzdCBpZiBpdCBpcyB0aGUgc2FtZSBhcyB0aGUgb3JpZ2luYWwuXG4gKiBJZiB0aGUgc29sdXRpb24gZG9lc24ndCBtYXRjaCB1bmRvIHRoZSByZW1vdmFsIGFuZFxuICogdHJ5IGFub3RoZXIgc3F1YXJlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVQdXp6bGUoc29sdXRpb24pIHtcbiAgdmFyIHB1enpsZSA9IFtdO1xuICB2YXIgaW5kaWNlcyA9IHt9O1xuICB2YXIgc2h1ZmZsZWQgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLnNodWZmbGUpKHNxdWFyZXMpO1xuXG4gIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3F1YXJlcykpLmZvckVhY2goZnVuY3Rpb24gKHMsIGkpIHtcbiAgICBwdXp6bGUucHVzaChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNvbHV0aW9uLmdldChzKSkpWzBdKTtcbiAgICBpbmRpY2VzW3NdID0gaTtcbiAgfSk7XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBNYXAoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNodWZmbGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGogPSBpbmRpY2VzW3NodWZmbGVkW2ldXTtcbiAgICB2YXIgdiA9IHB1enpsZVtqXTtcbiAgICBwdXp6bGVbal0gPSAnMCc7XG5cbiAgICBpZiAoIWlzVW5pcXVlKHNvbHV0aW9uLCBzb2x2ZShwdXp6bGUpKSkge1xuICAgICAgcHV6emxlW2pdID0gdjtcbiAgICAgIHJlc3VsdC5zZXQoc2h1ZmZsZWRbaV0sIHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuc2V0KHNodWZmbGVkW2ldLCAnMCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgZ2V0R2FtZTogZnVuY3Rpb24gZ2V0R2FtZSgpIHtcbiAgICB2YXIgZGlmZmljdWx0eSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbGV2ZWwuZWFzeTtcblxuICAgIHZhciBzb2x1dGlvbiA9IHNvbHZlKHJhbmRvbVB1enpsZSg4MSAtIGRpZmZpY3VsdHkpKTtcblxuICAgIHdoaWxlICghc29sdmVkKHNvbHV0aW9uKSkge1xuICAgICAgc29sdXRpb24gPSBzb2x2ZShyYW5kb21QdXp6bGUoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHB1enpsZTogY3JlYXRlUHV6emxlKHNvbHV0aW9uKSxcbiAgICAgIHNvbHV0aW9uOiBzb2x1dGlvblxuICAgIH07XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfc3Vkb2t1R3JpZEJ1aWxkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFN1ZG9rdUdyaWQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN1ZG9rdUdyaWQoKSB7XG4gICAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZ3JpZC1jb250YWluZXInO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1ZG9rdUdyaWQpO1xuXG4gICAgdGhpcy5ncmlkID0gKDAsIF9zdWRva3VHcmlkQnVpbGRlci5idWlsZCkoaWQpO1xuICAgIHRoaXMucGVlcnMgPSB0aGlzLmdyaWQucGVlcnM7XG4gICAgdGhpcy5zcXVhcmVzID0gdGhpcy5ncmlkLnNxdWFyZXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3Vkb2t1R3JpZCwgW3tcbiAgICBrZXk6ICdmaWxsQ2x1ZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsQ2x1ZXMoY2x1ZXMpIHtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBjbHVlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgX3JlZiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7XG5cbiAgICAgICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgICAgIHZhciBkID0gX3JlZjJbMV07XG5cbiAgICAgICAgICB2YXIgY2x1ZSA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZCkpWzBdO1xuICAgICAgICAgIHZhciBzcXVhcmUgPSB0aGlzLnNxdWFyZXMuZ2V0KHMudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgICAgICBpZiAoY2x1ZSA9PT0gJzAnIHx8IGNsdWUgPT09ICcuJykge1xuICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnY2x1ZScpO1xuICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IGNsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRTcXVhcmVWYWx1ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNxdWFyZVZhbHVlKHZhbHVlLCBwdXp6bGUpIHtcbiAgICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkU3F1YXJlKSB7XG4gICAgICAgIHB1enpsZS5zZXQodGhpcy5oaWdobGlnaHRlZFNxdWFyZS5pZC50b1VwcGVyQ2FzZSgpLCBuZXcgU2V0KHZhbHVlKSk7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGlnaGxpZ2h0U3F1YXJlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlnaGxpZ2h0U3F1YXJlKHNxdWFyZSkge1xuICAgICAgaWYgKCFzcXVhcmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbHVlJykpIHtcbiAgICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUpIHtcbiAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQtY29udGVudCcpO1xuICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlID0gc3F1YXJlO1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzZWQtY29udGVudCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hpZ2hsaWdodFBlZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlnaGxpZ2h0UGVlcnMoc3F1YXJlKSB7XG4gICAgICBpZiAoIXRoaXMuc3F1YXJlcy5nZXQoc3F1YXJlKS5jbGFzc0xpc3QuY29udGFpbnMoJ2NsdWUnKSkge1xuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZFBlZXJzKSB7XG4gICAgICAgICAgdGhpcy5oaWdobGlnaHRlZFBlZXJzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIGlmIChwLmlkICE9PSBzcXVhcmUpIHAuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkUGVlcnMgPSB0aGlzLnBlZXJzLmdldChzcXVhcmUpO1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkUGVlcnMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgIHJldHVybiBwLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3Vkb2t1R3JpZDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU3Vkb2t1R3JpZDtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxuZXhwb3J0cy5idWlsZCA9IGJ1aWxkO1xuXG52YXIgX3N1ZG9rdUdyaWRVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBuID0gOTtcbnZhciBzcXVhcmVDbGFzcyA9ICdjb2wtMSBzcXVhcmUnO1xudmFyIGNvbnRlbnRDbGFzcyA9ICdzcXVhcmUtY29udGVudCc7XG5cbnZhciBjcmVhdGVSb3cgPSBmdW5jdGlvbiBjcmVhdGVSb3coY2VsbFNpemUpIHtcbiAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICByb3cuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyb3cnKTtcbiAgcm93LnN0eWxlLmhlaWdodCA9IGNlbGxTaXplICsgJ3B4JztcblxuICByZXR1cm4gcm93O1xufTtcblxudmFyIGNyZWF0ZVNxdWFyZSA9IGZ1bmN0aW9uIGNyZWF0ZVNxdWFyZShjZWxsU2l6ZSkge1xuICB2YXIgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHNxdWFyZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgc3F1YXJlQ2xhc3MpO1xuXG4gIHNxdWFyZS5zdHlsZS5oZWlnaHQgPSBjZWxsU2l6ZSArICdweCc7XG4gIHNxdWFyZS5zdHlsZS53aWR0aCA9IGNlbGxTaXplICsgJ3B4JztcbiAgc3F1YXJlLnN0eWxlLm1heFdpZHRoID0gY2VsbFNpemUgKyAncHgnO1xuICBzcXVhcmUuc3R5bGUuZmxleCA9ICcwIDAgJyArIGNlbGxTaXplICsgJ3B4JztcblxuICByZXR1cm4gc3F1YXJlO1xufTtcblxudmFyIGNyZWF0ZVNxdWFyZUNvbnRlbnQgPSBmdW5jdGlvbiBjcmVhdGVTcXVhcmVDb250ZW50KGlkKSB7XG4gIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRlbnQuaWQgPSBpZDtcbiAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY29udGVudENsYXNzKTtcblxuICByZXR1cm4gY29udGVudDtcbn07XG5cbnZhciB0b0xvd2VyQ2FzZSA9IGZ1bmN0aW9uIHRvTG93ZXJDYXNlKHNxdWFyZXMpIHtcbiAgdmFyIHJlc3VsdCA9IG5ldyBNYXAoKTtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gc3F1YXJlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgIHZhciBfcmVmID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpO1xuXG4gICAgICB2YXIgcyA9IF9yZWYyWzBdO1xuICAgICAgdmFyIGQgPSBfcmVmMlsxXTtcblxuICAgICAgcmVzdWx0LnNldChzLnRvTG93ZXJDYXNlKCksIG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkKSkubWFwKGZ1bmN0aW9uIChkMSkge1xuICAgICAgICByZXR1cm4gZDEudG9Mb3dlckNhc2UoKTtcbiAgICAgIH0pKSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBidWlsZCgpIHtcbiAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZ3JpZC1jb250YWluZXInO1xuXG4gIHZhciByb3dzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSgoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldExvd2VyQ2FzZVJvd3MpKCkpKTtcbiAgdmFyIGNvbHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KCgwLCBfc3Vkb2t1R3JpZFV0aWwuZ2V0Q29scykoKSkpO1xuXG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICB2YXIgc3F1YXJlcyA9IG5ldyBNYXAoKTtcbiAgdmFyIGNlbGxTaXplID0gZWxlbWVudC5vZmZzZXRXaWR0aCA/IGVsZW1lbnQub2Zmc2V0V2lkdGggLyBuIC0gMyA6IDUwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgdmFyIHJvdyA9IGNyZWF0ZVJvdyhjZWxsU2l6ZSk7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgdmFyIF9pZCA9ICcnICsgcm93c1tpXSArIGNvbHNbal07XG4gICAgICB2YXIgc3F1YXJlID0gY3JlYXRlU3F1YXJlKGNlbGxTaXplKTtcbiAgICAgIHZhciBjb250ZW50ID0gY3JlYXRlU3F1YXJlQ29udGVudChfaWQpO1xuXG4gICAgICBzcXVhcmUuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgIHNxdWFyZXMuc2V0KF9pZCwgY29udGVudCk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG5cbiAgdmFyIHMgPSAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFNxdWFyZXMpKCk7XG4gIHZhciB1ID0gKDAsIF9zdWRva3VHcmlkVXRpbC5nZXRVbml0TGlzdCkoKTtcbiAgdmFyIHBlZXJJZHMgPSB0b0xvd2VyQ2FzZSgoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFBlZXJzKShzLCAoMCwgX3N1ZG9rdUdyaWRVdGlsLmdldFVuaXRzKShzLCB1KSkpO1xuICB2YXIgcGVlcnMgPSBuZXcgTWFwKCk7XG5cbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHBlZXJJZHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgIHZhciBfcmVmMyA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpO1xuXG4gICAgICB2YXIgX3MgPSBfcmVmNFswXTtcbiAgICAgIHZhciBwID0gX3JlZjRbMV07XG5cbiAgICAgIHBlZXJzLnNldChfcywgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwKSkubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBzcXVhcmVzLmdldCh4KTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGVlcnM6IHBlZXJzLFxuICAgIHNxdWFyZXM6IHNxdWFyZXNcbiAgfTtcbn1cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBtYWluLjk2MzUxNzE3MTIyY2YyY2MxZTFhLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgOTYzNTE3MTcxMjJjZjJjYzFlMWEiLCJjb25zdCByb3dzID0gbmV3IFNldChbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJ10pO1xuY29uc3QgY29scyA9IG5ldyBTZXQoWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOSddKTtcbmNvbnN0IGxvd2VyQ2FzZVJvd3MgPSBuZXcgU2V0KFsnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3dzKCkge1xuICByZXR1cm4gcm93cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvd2VyQ2FzZVJvd3MoKSB7XG4gIHJldHVybiBsb3dlckNhc2VSb3dzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29scygpIHtcbiAgcmV0dXJuIGNvbHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNxdWFyZXMoKSB7XG4gIHJldHVybiBjcm9zcyhyb3dzLCBjb2xzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXRMaXN0KCkge1xuICByZXR1cm4gWy4uLmNvbHNdLm1hcChjID0+IGNyb3NzKHJvd3MsIG5ldyBTZXQoYykpKVxuICAgICAgLmNvbmNhdChbLi4ucm93c10ubWFwKHIgPT4gY3Jvc3MobmV3IFNldChyKSwgY29scykpKVxuICAgICAgLmNvbmNhdCgoKCkgPT4ge1xuICAgICAgICBsZXQgdSA9IFtdO1xuICAgICAgICBbWydBJywgJ0InLCAnQyddLCBbJ0QnLCAnRScsICdGJ10sIFsnRycsICdIJywgJ0knXV0uZm9yRWFjaChyID0+IHtcbiAgICAgICAgICBbWycxJywgJzInLCAnMyddLCBbJzQnLCAnNScsICc2J10sIFsnNycsICc4JywgJzknXV0uZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgIHUucHVzaChjcm9zcyhuZXcgU2V0KHIpLCBuZXcgU2V0KGMpKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdTtcbiAgICAgIH0pKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5pdHMoc3F1YXJlcywgdW5pdGxpc3QpIHtcbiAgbGV0IHVuaXRzID0gbmV3IE1hcCgpO1xuICBbLi4uc3F1YXJlc10uZm9yRWFjaChzID0+IHVuaXRzLnNldChzLCB1bml0bGlzdC5maWx0ZXIodSA9PiB1LmhhcyhzKSkpKTtcblxuICByZXR1cm4gdW5pdHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZWVycyhzcXVhcmVzLCB1bml0cykge1xuICBsZXQgcGVlcnMgPSBuZXcgTWFwKCk7XG5cbiAgWy4uLnNxdWFyZXNdLmZvckVhY2gocyA9PiB7XG4gICAgbGV0IHAgPSB1bml0cy5nZXQocyk7XG4gICAgcGVlcnMuc2V0KHMsIG5ldyBTZXQoXG4gICAgICAgIFsuLi5uZXcgU2V0KFsuLi5wWzBdLCAuLi5wWzFdLCAuLi5wWzJdXSldLmZpbHRlcih4ID0+IHggIT09IHMpKSk7XG4gIH0pO1xuXG4gIHJldHVybiBwZWVycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKGEsIGIpIHtcbiAgbGV0IGMgPSBuZXcgU2V0KCk7XG5cbiAgZm9yIChsZXQgYTEgb2YgYS52YWx1ZXMoKSkge1xuICAgIGZvciAobGV0IGIxIG9mIGIudmFsdWVzKCkgfHwgYikge1xuICAgICAgYy5hZGQoYTEgKyBiMSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb21lKHNlcSwgZnVuYykge1xuICBmb3IgKGxldCBkIG9mIHNlcSkge1xuICAgIGxldCByZXN1bHQgPSBmdW5jKGQpO1xuICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogRmlzaGVyLVlhdGVzIFNodWZmbGVcbiAqIFNlZSBodHRwOi8vYml0Lmx5LzJnTVhpalhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUoc2VxKSB7XG4gIGxldCBhcnJheSA9IFsuLi5zZXFdO1xuICBsZXQgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoLCB0ZW1wb3JhcnlWYWx1ZSwgcmFuZG9tSW5kZXg7XG5cbiAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cbiAgd2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xuXG4gICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50Li4uXG4gICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjdXJyZW50SW5kZXgpO1xuICAgIGN1cnJlbnRJbmRleCAtPSAxO1xuXG4gICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgIHRlbXBvcmFyeVZhbHVlID0gYXJyYXlbY3VycmVudEluZGV4XTtcbiAgICBhcnJheVtjdXJyZW50SW5kZXhdID0gYXJyYXlbcmFuZG9tSW5kZXhdO1xuICAgIGFycmF5W3JhbmRvbUluZGV4XSA9IHRlbXBvcmFyeVZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhbHVlcykge1xuICBmb3IgKGxldCB2IG9mIHZhbHVlcylcbiAgICBpZiAoIXYpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvc3Vkb2t1LWdyaWQtdXRpbC5qcyIsImltcG9ydCAnLi4vY3NzL21haW4uY3NzJztcbmltcG9ydCBTdWRva3UgZnJvbSBcIi4vc3Vkb2t1XCI7XG5cbm5ldyBTdWRva3UoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvc3Vkb2t1LXVpLmpzIiwiaW1wb3J0IGdlbmVyYXRvciBmcm9tICcuL3N1ZG9rdS1nZW5lcmF0b3InO1xuaW1wb3J0IFN1ZG9rdUdyaWQgZnJvbSAnLi9zdWRva3UtZ3JpZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1ZG9rdSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2FtZSA9IGdlbmVyYXRvci5nZXRHYW1lKCk7XG4gICAgdGhpcy5wdXp6bGUgPSB0aGlzLmdhbWUucHV6emxlO1xuICAgIHRoaXMuc29sdXRpb24gPSB0aGlzLmdhbWUuc29sdXRpb247XG5cbiAgICB0aGlzLmdyaWQgPSBuZXcgU3Vkb2t1R3JpZCgpO1xuICAgIHRoaXMuZ3JpZC5maWxsQ2x1ZXModGhpcy5wdXp6bGUpO1xuICAgIHRoaXMuc2V0SW5wdXRFdmVudHMoKTtcbiAgfVxuXG4gIHNldElucHV0RXZlbnRzKCkge1xuICAgIGxldCBncmlkID0gdGhpcy5ncmlkO1xuICAgIGxldCBzcXVhcmVzID0gdGhpcy5ncmlkLnNxdWFyZXM7XG5cbiAgICAvLyBTZXR1cCB0b3VjaC9jbGljayBldmVudHMgZm9yIGVhY2ggc3F1YXJlLlxuICAgIGZvciAobGV0IFtzLCBlbF0gb2Ygc3F1YXJlcykge1xuICAgICAgZWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgZ3JpZC5oaWdobGlnaHRTcXVhcmUoZWwpO1xuICAgICAgICBncmlkLmhpZ2hsaWdodFBlZXJzKHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElucHV0IGV2ZW50XG4gICAgZG9jdW1lbnQub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGxldCB2YWx1ZSA9IGUua2V5O1xuICAgICAgbGV0IGtleWNvZGUgPSBlLmtleUNvZGU7XG5cbiAgICAgIGlmIChrZXljb2RlID49IDQ5ICYmIGtleWNvZGUgPD0gNTcpIHtcbiAgICAgICAgZ3JpZC5zZXRTcXVhcmVWYWx1ZSh2YWx1ZSwgdGhpcy5wdXp6bGUpO1xuICAgICAgICBpZiAodGhpcy5zb2x2ZWQoKSkgU3Vkb2t1LmRpc3BsYXlNZXNzYWdlKClcblxuICAgICAgfSBlbHNlIGlmIChrZXljb2RlID09PSA4KSB7XG4gICAgICAgIGdyaWQuc2V0U3F1YXJlVmFsdWUoJycsIHRoaXMucHV6emxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb2x2ZWQoKSB7XG4gICAgZm9yIChsZXQgW3MsIGRdIG9mIHRoaXMuc29sdXRpb24pIHtcbiAgICAgIGlmIChbLi4udGhpcy5wdXp6bGUuZ2V0KHMpXVswXSAhPT0gWy4uLmRdWzBdKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzdGF0aWMgZGlzcGxheU1lc3NhZ2UoKSB7XG4gICAgd2luZG93LmFsZXJ0KGBDb25ncmF0dWxhdGlvbnMhIFlvdSBzb2x2ZWQgdGhlIHB1enpsZS5gKVxuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3N1ZG9rdS5qcyIsIi8qKlxuICogQSBKYXZhU2NyaXB0IHBvcnQgYmFzZWQgb24gXCJTb2x2aW5nIEV2ZXJ5IFN1ZG9rdSBQdXp6bGVcIlxuICogYnkgUGV0ZXIgTm9ydmlnLlxuICpcbiAqIFRoZSBhcnRpY2xlIGNhbiBiZSBmb3VuZCBoZXJlOlxuICogLSBodHRwOi8vbm9ydmlnLmNvbS9zdWRva3UuaHRtbFxuICpcbiAqIFRoZSBvcmlnaW5hbCBQeXRob24gc291cmNlIGNhbiBiZSBmb3VuZCBoZXJlOlxuICogLSBodHRwczovL2dpdGh1Yi5jb20vbm9ydmlnL3B5dHVkZXMvYmxvYi9tYXN0ZXIvc3Vkb2t1LnB5XG4gKi9cblxuaW1wb3J0IHtcbiAgZ2V0Q29scyxcbiAgZ2V0U3F1YXJlcyxcbiAgZ2V0VW5pdExpc3QsXG4gIGdldFVuaXRzLFxuICBnZXRQZWVycyxcbiAgc29tZSxcbiAgc2h1ZmZsZSxcbiAgYWxsLFxuICBnZXRSYW5kb21JbnRcbn0gZnJvbSAnLi9zdWRva3UtZ3JpZC11dGlsJztcblxuY29uc3QgbGV2ZWwgPSB7XG4gIGVhc3k6IDI4LFxuICBtZWRpdW06IDM3LFxuICBoYXJkOiA0NSxcbiAgbWFzdGVyOiA2NVxufTtcblxuY29uc3QgZGlnaXRzID0gZ2V0Q29scygpO1xuY29uc3Qgc3F1YXJlcyA9IGdldFNxdWFyZXMoKTtcbmNvbnN0IHVuaXRsaXN0ID0gZ2V0VW5pdExpc3QoKTtcblxubGV0IHVuaXRzID0gZ2V0VW5pdHMoc3F1YXJlcywgdW5pdGxpc3QpO1xubGV0IHBlZXJzID0gZ2V0UGVlcnMoc3F1YXJlcywgdW5pdHMpO1xuXG4vKipcbiAqIENvbnZlcnQgZ3JpZCB0byBhIGRpY3Qgb2YgcG9zc2libGUgdmFsdWVzLCB7c3F1YXJlOiBkaWdpdHN9LFxuICogb3IgcmV0dXJuIGZhbHNlIGlmIGEgY29udHJhZGljdGlvbiBpcyBkZXRlY3RlZC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VHcmlkKGdyaWQpIHtcbiAgbGV0IHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgc3F1YXJlcy5mb3JFYWNoKHMgPT4gdmFsdWVzLnNldChzLCBkaWdpdHMpKTtcblxuICBmb3IgKGxldCBbcywgZF0gb2YgZ3JpZFZhbHVlcyhncmlkKS5lbnRyaWVzKCkpIHtcbiAgICBpZiAoZGlnaXRzLmhhcyhkKSAmJiAhYXNzaWduKHZhbHVlcywgcywgZCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufVxuXG4vKipcbiAqIENvbnZlcnQgZ3JpZCBpbnRvIGEgZGljdCBvZiB7c3F1YXJlOiBjaGFyfSB3aXRoICcwJyBvciAnLicgZm9yIGVtcHRpZXMuXG4gKi9cbmZ1bmN0aW9uIGdyaWRWYWx1ZXMoZ3JpZCkge1xuICBsZXQgY2hhcnMgPSBncmlkLmZpbHRlcihjID0+IGRpZ2l0cy5oYXMoYykgfHwgYyA9PT0gJzAnIHx8IGMgPT09ICcuJyk7XG4gIGxldCB2YWx1ZXMgPSBuZXcgTWFwKCk7XG4gIGxldCBzID0gWy4uLnNxdWFyZXNdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgIHZhbHVlcy5zZXQoc1tpXSwgY2hhcnNbaV0pO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuLyoqXG4gKiBFbGltaW5hdGUgYWxsIHRoZSBvdGhlciB2YWx1ZXMgKGV4Y2VwdCBkKSBmcm9tIHZhbHVlc1tzXSBhbmQgcHJvcGFnYXRlLlxuICogUmV0dXJuIHZhbHVlcywgZXhjZXB0IHJldHVybiBGYWxzZSBpZiBhIGNvbnRyYWRpY3Rpb24gaXMgZGV0ZWN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbih2YWx1ZXMsIHMsIGQpIHtcbiAgbGV0IG90aGVycyA9IFsuLi52YWx1ZXMuZ2V0KHMpXS5maWx0ZXIoeCA9PiB4ICE9PSBkKTtcbiAgcmV0dXJuIGFsbChvdGhlcnMubWFwKGQyID0+IGVsaW1pbmF0ZSh2YWx1ZXMsIHMsIGQyKSkpID8gdmFsdWVzIDogZmFsc2U7XG59XG5cbi8qKlxuICogRWxpbWluYXRlIGQgZnJvbSB2YWx1ZXNbc107IHByb3BhZ2F0ZSB3aGVuIHZhbHVlcyBvciBwbGFjZXMgPD0gMi5cbiAqIFJldHVybiB2YWx1ZXMsIGV4Y2VwdCByZXR1cm4gRmFsc2UgaWYgYSBjb250cmFkaWN0aW9uIGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBlbGltaW5hdGUodmFsdWVzLCBzLCBkKSB7XG4gIGlmICghdmFsdWVzLmdldChzKS5oYXMoZCkpXG4gICAgcmV0dXJuIHZhbHVlcztcblxuICB2YWx1ZXMuc2V0KHMsIG5ldyBTZXQoWy4uLnZhbHVlcy5nZXQocyldLmZpbHRlcih4ID0+IHggIT09IGQpKSk7XG5cbiAgaWYgKCF2YWx1ZXMuZ2V0KHMpLnNpemUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZXMuZ2V0KHMpLnNpemUgPT09IDEpIHtcbiAgICBsZXQgZDIgPSBbLi4udmFsdWVzLmdldChzKV1bMF07XG5cbiAgICBpZiAoIWFsbChbLi4ucGVlcnMuZ2V0KHMpXS5tYXAoczIgPT4gZWxpbWluYXRlKHZhbHVlcywgczIsIGQyKSkpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgdW5pdCBvZiB1bml0cy5nZXQocykpIHtcbiAgICBsZXQgZHBsYWNlcyA9IFsuLi51bml0XS5maWx0ZXIoczIgPT4gdmFsdWVzLmdldChzMikuaGFzKGQpKTtcblxuICAgIGlmICghZHBsYWNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGRwbGFjZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoIWFzc2lnbih2YWx1ZXMsIGRwbGFjZXNbMF0sIGQpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gc29sdmUoZ3JpZCkge1xuICByZXR1cm4gc2VhcmNoKHBhcnNlR3JpZChncmlkKSk7XG59XG5cbi8qKlxuICogVXNpbmcgZGVwdGgtZmlyc3Qgc2VhcmNoIGFuZCBwcm9wYWdhdGlvbiwgdHJ5IGFsbCBwb3NzaWJsZSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNlYXJjaCh2YWx1ZXMpIHtcbiAgaWYgKCF2YWx1ZXMpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChhbGwoWy4uLnNxdWFyZXNdLm1hcChzID0+IHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMSkpKVxuICAgIHJldHVybiB2YWx1ZXM7XG5cbiAgbGV0IHMgPSBbLi4uc3F1YXJlc11cbiAgICAgIC5maWx0ZXIocyA9PiB2YWx1ZXMuZ2V0KHMpLnNpemUgPiAxKVxuICAgICAgLnNvcnQoKHMxLCBzMikgPT4gdmFsdWVzLmdldChzMSkuc2l6ZSAtIHZhbHVlcy5nZXQoczIpLnNpemUpWzBdO1xuXG4gIHJldHVybiBzb21lKHZhbHVlcy5nZXQocyksIGQgPT4gc2VhcmNoKGFzc2lnbihuZXcgTWFwKHZhbHVlcyksIHMsIGQpKSk7XG59XG5cbi8qKlxuICogQSBwdXp6bGUgaXMgc29sdmVkIGlmIGVhY2ggdW5pdCBpcyBhIHBlcm11dGF0aW9uIG9mIHRoZSBkaWdpdHMgMSB0byA5LlxuICovXG5mdW5jdGlvbiBzb2x2ZWQodmFsdWVzKSB7XG4gIGZ1bmN0aW9uIHVuaXRTb2x2ZWQodW5pdCkge1xuICAgIGZvciAobGV0IHMgb2YgdW5pdCkge1xuICAgICAgbGV0IGRpZmYgPSBbLi4udmFsdWVzLmdldChzKV0uZmlsdGVyKGQgPT4gIWRpZ2l0cy5oYXMoZCkpO1xuICAgICAgaWYgKGRpZmYubGVuZ3RoID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcyAmJiBhbGwodW5pdGxpc3QubWFwKHUgPT4gdW5pdFNvbHZlZCh1KSkpO1xufVxuXG4vKipcbiAqIE1ha2UgYSByYW5kb20gcHV6emxlIHdpdGggTiBvciBtb3JlIGFzc2lnbm1lbnRzLiBSZXN0YXJ0IG9uIGNvbnRyYWRpY3Rpb25zLlxuICogTm90ZSB0aGUgcmVzdWx0aW5nIHB1enpsZSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBzb2x2YWJsZSwgYnV0IGVtcGlyaWNhbGx5XG4gKiBhYm91dCA5OS44JSBvZiB0aGVtIGFyZSBzb2x2YWJsZS4gU29tZSBoYXZlIG11bHRpcGxlIHNvbHV0aW9uc1xuICovXG5mdW5jdGlvbiByYW5kb21QdXp6bGUobiA9IDE3KSB7XG4gIGxldCB2YWx1ZXMgPSBuZXcgTWFwKCk7XG4gIHNxdWFyZXMuZm9yRWFjaChzID0+IHZhbHVlcy5zZXQocywgZGlnaXRzKSk7XG5cbiAgZm9yIChsZXQgcyBvZiBzaHVmZmxlKHNxdWFyZXMpKSB7XG4gICAgaWYgKCFhc3NpZ24odmFsdWVzLCBzLCByYW5kb21WYWx1ZSh2YWx1ZXMuZ2V0KHMpKSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxldCBkcyA9IFsuLi5zcXVhcmVzXVxuICAgICAgICAuZmlsdGVyKHMgPT4gdmFsdWVzLmdldChzKS5zaXplID09PSAxKVxuICAgICAgICAubWFwKHMgPT4gdmFsdWVzLmdldChzKSk7XG5cbiAgICBpZiAoZHMubGVuZ3RoID49IG4gJiYgbmV3IFNldChkcykuc2l6ZSA+PSA4KSB7XG4gICAgICByZXR1cm4gWy4uLnNxdWFyZXNdXG4gICAgICAgICAgLm1hcChzID0+IHZhbHVlcy5nZXQocykuc2l6ZSA9PT0gMSA/IFsuLi52YWx1ZXMuZ2V0KHMpXVswXSA6ICcwJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJhbmRvbVB1enpsZShuKTtcbn1cblxuZnVuY3Rpb24gcmFuZG9tVmFsdWUodmFsdWVzKSB7XG4gIHJldHVybiBbLi4udmFsdWVzXVtnZXRSYW5kb21JbnQoMCwgdmFsdWVzLnNpemUgLSAxKV07XG59XG5cbmZ1bmN0aW9uIGlzVW5pcXVlKG9yaWdpbmFsLCB0ZXN0KSB7XG4gIGZvciAobGV0IFtzLCBkXSBvZiBvcmlnaW5hbCkge1xuICAgIGlmIChbLi4udGVzdC5nZXQocyldWzBdICE9PSBbLi4uZF1bMF0pIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgdGhyb3VnaCB0aGUgcmFuZG9tbHkgc2h1ZmZsZWQgc3F1YXJlcy5cbiAqIEFmdGVyIHJlbW92aW5nIGVhY2ggc3F1YXJlIGZyb20gdGhlIHNvbHV0aW9uXG4gKiBzb2x2ZSBpdCBhbmQgdGVzdCBpZiBpdCBpcyB0aGUgc2FtZSBhcyB0aGUgb3JpZ2luYWwuXG4gKiBJZiB0aGUgc29sdXRpb24gZG9lc24ndCBtYXRjaCB1bmRvIHRoZSByZW1vdmFsIGFuZFxuICogdHJ5IGFub3RoZXIgc3F1YXJlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVQdXp6bGUoc29sdXRpb24pIHtcbiAgbGV0IHB1enpsZSA9IFtdO1xuICBsZXQgaW5kaWNlcyA9IHt9O1xuICBsZXQgc2h1ZmZsZWQgPSBzaHVmZmxlKHNxdWFyZXMpO1xuXG4gIFsuLi5zcXVhcmVzXS5mb3JFYWNoKChzLCBpKSA9PiB7XG4gICAgcHV6emxlLnB1c2goWy4uLnNvbHV0aW9uLmdldChzKV1bMF0pO1xuICAgIGluZGljZXNbc10gPSBpO1xuICB9KTtcblxuICBsZXQgcmVzdWx0ID0gbmV3IE1hcCgpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2h1ZmZsZWQubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgaiA9IGluZGljZXNbc2h1ZmZsZWRbaV1dO1xuICAgIGxldCB2ID0gcHV6emxlW2pdO1xuICAgIHB1enpsZVtqXSA9ICcwJztcblxuICAgIGlmICghaXNVbmlxdWUoc29sdXRpb24sIHNvbHZlKHB1enpsZSkpKSB7XG4gICAgICBwdXp6bGVbal0gPSB2O1xuICAgICAgcmVzdWx0LnNldChzaHVmZmxlZFtpXSwgdik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5zZXQoc2h1ZmZsZWRbaV0sICcwJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBnZXRHYW1lOiAoZGlmZmljdWx0eSA9IGxldmVsLmVhc3kpID0+IHtcbiAgICBsZXQgc29sdXRpb24gPSBzb2x2ZShyYW5kb21QdXp6bGUoODEgLSBkaWZmaWN1bHR5KSk7XG5cbiAgICB3aGlsZSAoIXNvbHZlZChzb2x1dGlvbikpIHtcbiAgICAgIHNvbHV0aW9uID0gc29sdmUocmFuZG9tUHV6emxlKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwdXp6bGU6IGNyZWF0ZVB1enpsZShzb2x1dGlvbiksXG4gICAgICBzb2x1dGlvbjogc29sdXRpb25cbiAgICB9O1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvc3Vkb2t1LWdlbmVyYXRvci5qcyIsImltcG9ydCB7YnVpbGR9IGZyb20gJy4vc3Vkb2t1LWdyaWQtYnVpbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1ZG9rdUdyaWQge1xuICBjb25zdHJ1Y3RvcihpZD0nZ3JpZC1jb250YWluZXInKSB7XG4gICAgdGhpcy5ncmlkID0gYnVpbGQoaWQpO1xuICAgIHRoaXMucGVlcnMgPSB0aGlzLmdyaWQucGVlcnM7XG4gICAgdGhpcy5zcXVhcmVzID0gdGhpcy5ncmlkLnNxdWFyZXM7XG4gIH1cblxuICBmaWxsQ2x1ZXMoY2x1ZXMpIHtcbiAgICBmb3IgKGxldCBbcywgZF0gb2YgY2x1ZXMpIHtcbiAgICAgIGxldCBjbHVlID0gWy4uLmRdWzBdO1xuICAgICAgbGV0IHNxdWFyZSA9IHRoaXMuc3F1YXJlcy5nZXQocy50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgaWYgKGNsdWUgPT09ICcwJyB8fCBjbHVlID09PSAnLicpIHtcbiAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2NsdWUnKTtcbiAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IGNsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0U3F1YXJlVmFsdWUodmFsdWUsIHB1enpsZSkge1xuICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkU3F1YXJlKSB7XG4gICAgICBwdXp6bGUuc2V0KHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuaWQudG9VcHBlckNhc2UoKSwgbmV3IFNldCh2YWx1ZSkpO1xuICAgICAgdGhpcy5oaWdobGlnaHRlZFNxdWFyZS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBoaWdobGlnaHRTcXVhcmUoc3F1YXJlKSB7XG4gICAgaWYgKCFzcXVhcmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbHVlJykpIHtcbiAgICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkU3F1YXJlKSB7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZC1jb250ZW50Jyk7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRTcXVhcmUgPSBzcXVhcmU7XG4gICAgICB0aGlzLmhpZ2hsaWdodGVkU3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzZWQtY29udGVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGhpZ2hsaWdodFBlZXJzKHNxdWFyZSkge1xuICAgIGlmICghdGhpcy5zcXVhcmVzLmdldChzcXVhcmUpLmNsYXNzTGlzdC5jb250YWlucygnY2x1ZScpKSB7XG4gICAgICBpZiAodGhpcy5oaWdobGlnaHRlZFBlZXJzKSB7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRQZWVycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwLmlkICE9PSBzcXVhcmUpIHAuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmhpZ2hsaWdodGVkUGVlcnMgPSB0aGlzLnBlZXJzLmdldChzcXVhcmUpO1xuICAgICAgdGhpcy5oaWdobGlnaHRlZFBlZXJzLmZvckVhY2gocCA9PiBwLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvc3Vkb2t1LWdyaWQuanMiLCJpbXBvcnQge1xuICBnZXRMb3dlckNhc2VSb3dzLFxuICBnZXRDb2xzLFxuICBnZXRTcXVhcmVzLFxuICBnZXRQZWVycywgZ2V0VW5pdHMsIGdldFVuaXRMaXN0XG59IGZyb20gXCIuL3N1ZG9rdS1ncmlkLXV0aWxcIjtcblxuY29uc3QgbiA9IDk7XG5jb25zdCBzcXVhcmVDbGFzcyA9ICdjb2wtMSBzcXVhcmUnO1xuY29uc3QgY29udGVudENsYXNzID0gJ3NxdWFyZS1jb250ZW50JztcblxubGV0IGNyZWF0ZVJvdyA9IChjZWxsU2l6ZSkgPT4ge1xuICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHJvdy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdycpO1xuICByb3cuc3R5bGUuaGVpZ2h0ID0gYCR7Y2VsbFNpemV9cHhgO1xuXG4gIHJldHVybiByb3c7XG59O1xuXG5sZXQgY3JlYXRlU3F1YXJlID0gKGNlbGxTaXplKSA9PiB7XG4gIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc3F1YXJlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBzcXVhcmVDbGFzcyk7XG5cbiAgc3F1YXJlLnN0eWxlLmhlaWdodCA9IGAke2NlbGxTaXplfXB4YDtcbiAgc3F1YXJlLnN0eWxlLndpZHRoID0gYCR7Y2VsbFNpemV9cHhgO1xuICBzcXVhcmUuc3R5bGUubWF4V2lkdGggPSBgJHtjZWxsU2l6ZX1weGA7XG4gIHNxdWFyZS5zdHlsZS5mbGV4ID0gYDAgMCAke2NlbGxTaXplfXB4YDtcblxuICByZXR1cm4gc3F1YXJlO1xufTtcblxubGV0IGNyZWF0ZVNxdWFyZUNvbnRlbnQgPSAoaWQpID0+IHtcbiAgbGV0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGVudC5pZCA9IGlkO1xuICBjb250ZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjb250ZW50Q2xhc3MpO1xuXG4gIHJldHVybiBjb250ZW50O1xufTtcblxubGV0IHRvTG93ZXJDYXNlID0gKHNxdWFyZXMpID0+IHtcbiAgbGV0IHJlc3VsdCA9IG5ldyBNYXAoKTtcbiAgZm9yIChsZXQgW3MsIGRdIG9mIHNxdWFyZXMpIHtcbiAgICByZXN1bHQuc2V0KHMudG9Mb3dlckNhc2UoKSwgbmV3IFNldChbLi4uZF0ubWFwKGQxID0+IGQxLnRvTG93ZXJDYXNlKCkpKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkKGlkPSdncmlkLWNvbnRhaW5lcicpIHtcbiAgbGV0IHJvd3MgPSBbLi4uZ2V0TG93ZXJDYXNlUm93cygpXTtcbiAgbGV0IGNvbHMgPSBbLi4uZ2V0Q29scygpXTtcblxuICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgbGV0IHNxdWFyZXMgPSBuZXcgTWFwKCk7XG4gIGxldCBjZWxsU2l6ZSA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPyAoZWxlbWVudC5vZmZzZXRXaWR0aCAvIG4pIC0gMyA6IDUwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgbGV0IHJvdyA9IGNyZWF0ZVJvdyhjZWxsU2l6ZSk7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgbGV0IGlkID0gYCR7cm93c1tpXX0ke2NvbHNbal19YDtcbiAgICAgIGxldCBzcXVhcmUgPSBjcmVhdGVTcXVhcmUoY2VsbFNpemUpO1xuICAgICAgbGV0IGNvbnRlbnQgPSBjcmVhdGVTcXVhcmVDb250ZW50KGlkKTtcblxuICAgICAgc3F1YXJlLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgcm93LmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICBzcXVhcmVzLnNldChpZCwgY29udGVudCk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG5cbiAgbGV0IHMgPSBnZXRTcXVhcmVzKCk7XG4gIGxldCB1ID0gZ2V0VW5pdExpc3QoKTtcbiAgbGV0IHBlZXJJZHMgPSB0b0xvd2VyQ2FzZShnZXRQZWVycyhzLCBnZXRVbml0cyhzLCB1KSkpO1xuICBsZXQgcGVlcnMgPSBuZXcgTWFwKCk7XG5cbiAgZm9yIChsZXQgW3MsIHBdIG9mIHBlZXJJZHMpIHtcbiAgICBwZWVycy5zZXQocywgWy4uLnBdLm1hcCh4ID0+IHNxdWFyZXMuZ2V0KHgpKSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBlZXJzOiBwZWVycyxcbiAgICBzcXVhcmVzOiBzcXVhcmVzXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvc3Vkb2t1LWdyaWQtYnVpbGRlci5qcyJdLCJzb3VyY2VSb290IjoiIn0=